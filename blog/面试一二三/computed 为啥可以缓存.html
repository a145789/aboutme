<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="description" content="Generated by create next app"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico"/><title>computed 为啥可以缓存</title><meta name="next-head-count" content="5"/><link rel="preload" href="/aboutme/_next/static/css/72e5085a4b32d982.css" as="style" crossorigin=""/><link rel="stylesheet" href="/aboutme/_next/static/css/72e5085a4b32d982.css" crossorigin="" data-n-g=""/><link rel="preload" href="/aboutme/_next/static/css/9eaa875a96bf6d0d.css" as="style" crossorigin=""/><link rel="stylesheet" href="/aboutme/_next/static/css/9eaa875a96bf6d0d.css" crossorigin=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/aboutme/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="/aboutme/_next/static/chunks/55.ac8bb8511788d520.js" crossorigin=""></script><script src="/aboutme/_next/static/chunks/webpack-0edbe5080c3de390.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/chunks/framework-1190953c57ed1fac.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/chunks/main-d4cbb54761a47268.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/chunks/pages/_app-8af903987ec1d369.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/chunks/pages/blog/%5Blabel%5D/%5Bslug%5D-91524239d86808f2.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/kwz5PDhmZanNeXhNFpSTQ/_buildManifest.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/kwz5PDhmZanNeXhNFpSTQ/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="dark:bg-#060606 dark:text-gray-200 w-full h-full"><div class="w-1300px h-full mx-auto flex justify-center items-center  transition-colors flex-row lt-md:flex-col lt-md:w-full"><ul class="relative z-1 lt-md:flex lt-md:justify-center lt-md:mt-12px lt-md:pb-12px lt-md:shadow-md lt-md:w-full flex-shrink-0"><li class="py-6px px-10px my-8px font-sans transition-colors lt-md:mx-4px lt-md:my-0 text-neutral-500"><a rel="noreferrer" href="/aboutme">home</a></li><li class="py-6px px-10px my-8px font-sans transition-colors lt-md:mx-4px lt-md:my-0 font-bold"><a rel="noreferrer" href="/aboutme/blog">blog</a></li><li class="py-6px px-10px my-8px font-sans transition-colors lt-md:mx-4px lt-md:my-0 text-neutral-500"><a rel="noreferrer" href="/aboutme/about">about</a></li></ul><main class="w-800px md:h-full lt-md:flex-1 pb-24px lt-md:pb-0 box-border flex flex-col items-center lt-md:w-full ml-26px lt-md:ml-0 lt-md:overflow-y-hidden"><div class="w-full flex-1 overflow-y-auto"><div class="md:h-full overflow-y-auto md:scrollbar~"><div class="mt-40px mb-20px lt-md:mt-16px lt-md:mx-10px"><h1 class="font-bold text-3xl font-serif">computed 为啥可以缓存</h1><div class="my-10px"><span class="font-mono text-sm bg-neutral-100 dark:bg-neutral-800 rounded-md px-2 py-1 tracking-tighter">2023/04/05 17:12</span></div><div class="mdx_mdx__tEkiT"><h1 id="源码解析"><a href="#源码解析">源码解析</a></h1>
<div data-rehype-pretty-code-fragment=""><pre class="vitesse-dark" tabindex="0" data-language="js" data-theme="dark"><code data-language="js" data-theme="dark" style="display:grid"><span data-line=""><span style="color:#CB7676">const</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">a</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#80A665">computed</span><span style="color:#666666">(()</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=&gt;</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#4D9375">return</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">b</span><span style="color:#666666">.</span><span style="color:#BD976A">value</span><span style="color:#DBD7CAEE"> </span><span style="color:#CB7676">+</span><span style="color:#DBD7CAEE"> </span><span style="color:#4C9A91">1</span></span>
<span data-line=""><span style="color:#666666">})</span></span></code></pre><pre class="one-dark-pro" tabindex="0" data-language="js" data-theme="light"><code data-language="js" data-theme="light" style="display:grid"><span data-line=""><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">a</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">computed</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">b</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span></span>
<span data-line=""><span style="color:#ABB2BF">})</span></span></code></pre></div>
<p>往 <code>computed</code> 中传入一个 <code>getter</code>，对应的 <code>Vue</code> 源码为</p>
<div data-rehype-pretty-code-fragment=""><pre class="vitesse-dark" tabindex="0" data-language="ts" data-theme="dark"><code data-language="ts" data-theme="dark" style="display:grid"><span data-line=""><span style="color:#758575DD">// 简化后的代码</span></span>
<span data-line=""><span style="color:#4D9375">export</span><span style="color:#DBD7CAEE"> </span><span style="color:#CB7676">function</span><span style="color:#DBD7CAEE"> </span><span style="color:#80A665">computed</span><span style="color:#666666">&lt;</span><span style="color:#5DA994">T</span><span style="color:#666666">&gt;(</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#BD976A">getterOrOptions</span><span style="color:#666666">: </span><span style="color:#5DA994">ComputedGetter</span><span style="color:#666666">&lt;</span><span style="color:#5DA994">T</span><span style="color:#666666">&gt; | </span><span style="color:#5DA994">WritableComputedOptions</span><span style="color:#666666">&lt;</span><span style="color:#5DA994">T</span><span style="color:#666666">&gt;</span></span>
<span data-line=""><span style="color:#666666">)</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#CB7676">const </span><span style="color:#BD976A">cRef</span><span style="color:#CB7676"> </span><span style="color:#666666">=</span><span style="color:#CB7676"> new </span><span style="color:#80A665">ComputedRefImpl</span><span style="color:#666666">(</span><span style="color:#BD976A">getter</span><span style="color:#666666">,</span><span style="color:#CB7676"> </span><span style="color:#BD976A">setter</span><span style="color:#666666">,</span><span style="color:#CB7676"> </span><span style="color:#BD976A">onlyGetter</span><span style="color:#CB7676"> || !</span><span style="color:#BD976A">setter</span><span style="color:#666666">,</span><span style="color:#CB7676"> </span><span style="color:#BD976A">isSSR</span><span style="color:#666666">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#4D9375">return</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">cRef</span><span style="color:#DBD7CAEE"> </span><span style="color:#4D9375">as</span><span style="color:#DBD7CAEE"> </span><span style="color:#5DA994">any</span></span>
<span data-line=""><span style="color:#666666">}</span></span></code></pre><pre class="one-dark-pro" tabindex="0" data-language="ts" data-theme="light"><code data-language="ts" data-theme="light" style="display:grid"><span data-line=""><span style="color:#7F848E;font-style:italic">// 简化后的代码</span></span>
<span data-line=""><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">function</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">computed</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF">&gt;(</span></span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#E06C75;font-style:italic">getterOrOptions</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">ComputedGetter</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF">&gt; | </span><span style="color:#E5C07B">WritableComputedOptions</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">cRef</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">new</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">ComputedRefImpl</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">getter</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">setter</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">onlyGetter</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">||</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">!</span><span style="color:#E06C75">setter</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">isSSR</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">cRef</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">as</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">any</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></div>
<p>通过初始化 <code>ComputedRefImpl</code> 得到一个实例。</p>
<div data-rehype-pretty-code-fragment=""><pre class="vitesse-dark" tabindex="0" data-language="ts" data-theme="dark"><code data-language="ts" data-theme="dark" style="display:grid"><span data-line=""><span style="color:#4D9375">export</span><span style="color:#DBD7CAEE"> </span><span style="color:#CB7676">class</span><span style="color:#DBD7CAEE"> </span><span style="color:#5DA994">ComputedRefImpl</span><span style="color:#666666">&lt;</span><span style="color:#5DA994">T</span><span style="color:#666666">&gt;</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#CB7676">private</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">_value</span><span style="color:#CB7676">!</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#CB7676">public</span><span style="color:#DBD7CAEE"> </span><span style="color:#CB7676">readonly</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">effect</span><span style="color:#666666">: </span><span style="color:#5DA994">ReactiveEffect</span><span style="color:#666666">&lt;</span><span style="color:#5DA994">T</span><span style="color:#666666">&gt;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#CB7676">public</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">_dirty</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#4D9375">true</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#CB7676">constructor</span><span style="color:#666666">(</span><span style="color:#BD976A">getter</span><span style="color:#666666">: </span><span style="color:#5DA994">ComputedGetter</span><span style="color:#666666">&lt;</span><span style="color:#5DA994">T</span><span style="color:#666666">&gt;)</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#C99076">this</span><span style="color:#666666">.</span><span style="color:#BD976A">effect</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#CB7676">new</span><span style="color:#DBD7CAEE"> </span><span style="color:#80A665">ReactiveEffect</span><span style="color:#666666">(</span><span style="color:#BD976A">getter</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">()</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=&gt;</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">      </span><span style="color:#4D9375">if</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">(</span><span style="color:#CB7676">!</span><span style="color:#C99076">this</span><span style="color:#666666">.</span><span style="color:#BD976A">_dirty</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">        </span><span style="color:#C99076">this</span><span style="color:#666666">.</span><span style="color:#BD976A">_dirty</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#4D9375">true</span></span>
<span data-line=""><span style="color:#DBD7CAEE">        </span><span style="color:#80A665">triggerRefValue</span><span style="color:#666666">(</span><span style="color:#C99076">this</span><span style="color:#666666">)</span></span>
<span data-line=""><span style="color:#DBD7CAEE">      </span><span style="color:#666666">}</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#666666">})</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#C99076">this</span><span style="color:#666666">.</span><span style="color:#BD976A">effect</span><span style="color:#666666">.</span><span style="color:#BD976A">computed</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#C99076">this</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#666666">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#CB7676">get</span><span style="color:#DBD7CAEE"> </span><span style="color:#80A665">value</span><span style="color:#666666">()</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#666666">    </span><span style="color:#758575DD">// the computed ref may get wrapped by other proxies e.g. readonly() #3376</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#CB7676">const </span><span style="color:#BD976A">self</span><span style="color:#CB7676"> </span><span style="color:#666666">=</span><span style="color:#CB7676"> </span><span style="color:#80A665">toRaw</span><span style="color:#666666">(</span><span style="color:#C99076">this</span><span style="color:#666666">)</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#80A665">trackRefValue</span><span style="color:#666666">(</span><span style="color:#BD976A">self</span><span style="color:#666666">)</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#4D9375">if</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">(</span><span style="color:#BD976A">self</span><span style="color:#666666">.</span><span style="color:#BD976A">_dirty</span><span style="color:#DBD7CAEE"> </span><span style="color:#CB7676">||</span><span style="color:#DBD7CAEE"> </span><span style="color:#CB7676">!</span><span style="color:#BD976A">self</span><span style="color:#666666">.</span><span style="color:#BD976A">_cacheable</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">      </span><span style="color:#BD976A">self</span><span style="color:#666666">.</span><span style="color:#BD976A">_dirty</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#4D9375">false</span></span>
<span data-line=""><span style="color:#DBD7CAEE">      </span><span style="color:#BD976A">self</span><span style="color:#666666">.</span><span style="color:#BD976A">_value</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">self</span><span style="color:#666666">.</span><span style="color:#BD976A">effect</span><span style="color:#666666">.</span><span style="color:#80A665">run</span><span style="color:#666666">()</span><span style="color:#CB7676">!</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#666666">}</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#4D9375">return</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">self</span><span style="color:#666666">.</span><span style="color:#BD976A">_value</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#666666">}</span></span>
<span data-line=""><span style="color:#666666">}</span></span></code></pre><pre class="one-dark-pro" tabindex="0" data-language="ts" data-theme="light"><code data-language="ts" data-theme="light" style="display:grid"><span data-line=""><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">class</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">ComputedRefImpl</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF">&gt; {</span></span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">private</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">_value</span><span style="color:#ABB2BF">!: </span><span style="color:#E5C07B">T</span></span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">public</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">readonly</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">effect</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">ReactiveEffect</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF">&gt;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">public</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">_dirty</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">true</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">constructor</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">getter</span><span style="color:#ABB2BF">: </span><span style="color:#E5C07B">ComputedGetter</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF">&gt;) {</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">effect</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">new</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">ReactiveEffect</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">getter</span><span style="color:#ABB2BF">, () </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#ABB2BF">      </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_dirty</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_dirty</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">true</span></span>
<span data-line=""><span style="color:#ABB2BF">        </span><span style="color:#61AFEF">triggerRefValue</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">      }</span></span>
<span data-line=""><span style="color:#ABB2BF">    })</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">effect</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">computed</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">this</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">get</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">value</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#7F848E;font-style:italic">// the computed ref may get wrapped by other proxies e.g. readonly() #3376</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">toRaw</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#61AFEF">trackRefValue</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">self</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_dirty</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">||</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">!</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_cacheable</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#ABB2BF">      </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_dirty</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">false</span></span>
<span data-line=""><span style="color:#ABB2BF">      </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_value</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">effect</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">run</span><span style="color:#ABB2BF">()</span><span style="color:#56B6C2">!</span></span>
<span data-line=""><span style="color:#ABB2BF">    }</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_value</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></div>
<p><code>ComputedRefImpl</code> 内部有两个属性：一个是 <code>_value</code>，一个是 <code>_dirty</code>。</p>
<p>当访问 <code>a.value</code> 时，会触发 <code>get value()</code>，</p>
<div data-rehype-pretty-code-fragment=""><pre class="vitesse-dark" tabindex="0" data-language="ts" data-theme="dark"><code data-language="ts" data-theme="dark" style="display:grid"><span data-line=""><span style="color:#4D9375">export</span><span style="color:#DBD7CAEE"> </span><span style="color:#CB7676">class</span><span style="color:#DBD7CAEE"> </span><span style="color:#5DA994">ComputedRefImpl</span><span style="color:#666666">&lt;</span><span style="color:#5DA994">T</span><span style="color:#666666">&gt;</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#CB7676">private</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">_value</span><span style="color:#CB7676">!</span><span style="color:#666666">: </span><span style="color:#5DA994">T</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#CB7676">public</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">_dirty</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#4D9375">true</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#CB7676">get</span><span style="color:#DBD7CAEE"> </span><span style="color:#80A665">value</span><span style="color:#666666">()</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#CB7676">const </span><span style="color:#BD976A">self</span><span style="color:#CB7676"> </span><span style="color:#666666">=</span><span style="color:#CB7676"> </span><span style="color:#80A665">toRaw</span><span style="color:#666666">(</span><span style="color:#C99076">this</span><span style="color:#666666">)</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#4D9375">if</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">(</span><span style="color:#BD976A">self</span><span style="color:#666666">.</span><span style="color:#BD976A">_dirty</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">      </span><span style="color:#BD976A">self</span><span style="color:#666666">.</span><span style="color:#BD976A">_dirty</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#4D9375">false</span></span>
<span data-line=""><span style="color:#DBD7CAEE">      </span><span style="color:#BD976A">self</span><span style="color:#666666">.</span><span style="color:#BD976A">_value</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">self</span><span style="color:#666666">.</span><span style="color:#BD976A">effect</span><span style="color:#666666">.</span><span style="color:#80A665">run</span><span style="color:#666666">()</span><span style="color:#CB7676">!</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#666666">}</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#4D9375">return</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">self</span><span style="color:#666666">.</span><span style="color:#BD976A">_value</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#666666">}</span></span>
<span data-line=""><span style="color:#666666">}</span></span></code></pre><pre class="one-dark-pro" tabindex="0" data-language="ts" data-theme="light"><code data-language="ts" data-theme="light" style="display:grid"><span data-line=""><span style="color:#C678DD">export</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">class</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">ComputedRefImpl</span><span style="color:#ABB2BF">&lt;</span><span style="color:#E5C07B">T</span><span style="color:#ABB2BF">&gt; {</span></span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">private</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">_value</span><span style="color:#ABB2BF">!: </span><span style="color:#E5C07B">T</span></span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">public</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">_dirty</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">true</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">get</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">value</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">toRaw</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_dirty</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#ABB2BF">      </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_dirty</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">false</span></span>
<span data-line=""><span style="color:#ABB2BF">      </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_value</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#E5C07B">effect</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">run</span><span style="color:#ABB2BF">()</span><span style="color:#56B6C2">!</span></span>
<span data-line=""><span style="color:#ABB2BF">    }</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">self</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_value</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></div>
<blockquote>
<p>如果 <code>_dirty</code> 为 <code>true</code>，代表需要获取新值，则重新执行 <code>getter</code> 获取到新值赋值到 <code>_value</code> 上，并且把 <code>_dirty</code> 变为 <code>false</code> ，下次再获取这个值的时候就用缓存的值。</p>
</blockquote>
<p>而初始化的时候会在 <code>constructor</code> 中实例化一个 <code>ReactiveEffect</code>，其作用是将实例化后得出来的 <code>effect</code> 作为 <code>dep</code> 添加到依赖的响应式数据中，一旦响应式数据变更，触发此 <code>dep</code>，<code>ReactiveEffect</code> 接受两个参数，第一个是 <code>fn</code>，第二个是 <code>scheduler</code>，一个可以自定义的调用函数。</p>
<p>响应式数据变化后的流程为：</p>
<div data-rehype-pretty-code-fragment=""><pre class="vitesse-dark" tabindex="0" data-language="ts" data-theme="dark"><code data-language="ts" data-theme="dark" style="display:grid"><span data-line=""><span style="color:#CB7676">const </span><span style="color:#BD976A">b</span><span style="color:#CB7676"> </span><span style="color:#666666">=</span><span style="color:#CB7676"> </span><span style="color:#80A665">ref</span><span style="color:#666666">(</span><span style="color:#4C9A91">0</span><span style="color:#666666">)</span></span>
<span data-line=""><span style="color:#CB7676">const </span><span style="color:#BD976A">a</span><span style="color:#CB7676"> </span><span style="color:#666666">=</span><span style="color:#CB7676"> </span><span style="color:#80A665">computed</span><span style="color:#666666">(()</span><span style="color:#CB7676"> </span><span style="color:#666666">=&gt;</span><span style="color:#CB7676"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#CB7676">  </span><span style="color:#4D9375">return</span><span style="color:#CB7676"> </span><span style="color:#BD976A">b</span><span style="color:#666666">.</span><span style="color:#BD976A">value</span><span style="color:#CB7676"> + </span><span style="color:#4C9A91">1</span></span>
<span data-line=""><span style="color:#666666">})</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#BD976A">b</span><span style="color:#666666">.</span><span style="color:#BD976A">value</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#4C9A91">10</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#758575DD">// b.value 变更，触发 a 放在 b.value 的 dep ，即 ReactiveEffect 实例化出的 effect</span></span>
<span data-line=""><span style="color:#758575DD">// effect 暴露出一个 run 函数，调用 run 函数会调用传入 ReactiveEffect 的 `fn`</span></span>
<span data-line=""><span style="color:#758575DD">// 如果传入 ReactiveEffect 的第二个参数有值，会优先调用 scheduler，即</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#CB7676">class</span><span style="color:#DBD7CAEE"> </span><span style="color:#5DA994">ReactiveEffect</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#CB7676">constructor</span><span style="color:#666666">(</span><span style="color:#BD976A">fn</span><span style="color:#666666">,</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">scheduler</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#C99076">this</span><span style="color:#666666">.</span><span style="color:#BD976A">fn</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">fn</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#C99076">this</span><span style="color:#666666">.</span><span style="color:#BD976A">scheduler</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">=</span><span style="color:#DBD7CAEE"> </span><span style="color:#BD976A">scheduler</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#666666">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#80A665">run</span><span style="color:#666666">()</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">    </span><span style="color:#4D9375">return</span><span style="color:#DBD7CAEE"> </span><span style="color:#C99076">this</span><span style="color:#666666">.</span><span style="color:#80A665">fn</span><span style="color:#666666">()</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#666666">}</span></span>
<span data-line=""><span style="color:#666666">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#CB7676">const </span><span style="color:#BD976A">effect</span><span style="color:#CB7676"> </span><span style="color:#666666">=</span><span style="color:#CB7676"> new </span><span style="color:#80A665">ReactiveEffect</span><span style="color:#666666">(</span><span style="color:#BD976A">getter</span><span style="color:#666666">,</span><span style="color:#CB7676"> </span><span style="color:#666666">()</span><span style="color:#CB7676"> </span><span style="color:#666666">=&gt;</span><span style="color:#CB7676"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#CB7676">  </span><span style="color:#4D9375">if</span><span style="color:#CB7676"> </span><span style="color:#666666">(</span><span style="color:#CB7676">!</span><span style="color:#C99076">this</span><span style="color:#666666">.</span><span style="color:#BD976A">_dirty</span><span style="color:#666666">)</span><span style="color:#CB7676"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#CB7676">    </span><span style="color:#C99076">this</span><span style="color:#666666">.</span><span style="color:#BD976A">_dirty</span><span style="color:#CB7676"> </span><span style="color:#666666">=</span><span style="color:#CB7676"> </span><span style="color:#4D9375">true</span></span>
<span data-line=""><span style="color:#CB7676">  </span><span style="color:#666666">}</span></span>
<span data-line=""><span style="color:#666666">})</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#4D9375">if</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">(</span><span style="color:#BD976A">effect</span><span style="color:#666666">.</span><span style="color:#BD976A">scheduler</span><span style="color:#666666">)</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#BD976A">effect</span><span style="color:#666666">.</span><span style="color:#80A665">scheduler</span><span style="color:#666666">()</span></span>
<span data-line=""><span style="color:#666666">}</span><span style="color:#DBD7CAEE"> </span><span style="color:#4D9375">else</span><span style="color:#DBD7CAEE"> </span><span style="color:#666666">{</span></span>
<span data-line=""><span style="color:#DBD7CAEE">  </span><span style="color:#BD976A">effect</span><span style="color:#666666">.</span><span style="color:#80A665">run</span><span style="color:#666666">()</span></span>
<span data-line=""><span style="color:#666666">}</span></span></code></pre><pre class="one-dark-pro" tabindex="0" data-language="ts" data-theme="light"><code data-language="ts" data-theme="light" style="display:grid"><span data-line=""><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">b</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">ref</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">0</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">a</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">computed</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">b</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">+</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">1</span></span>
<span data-line=""><span style="color:#ABB2BF">})</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#E5C07B">b</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">10</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// b.value 变更，触发 a 放在 b.value 的 dep ，即 ReactiveEffect 实例化出的 effect</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// effect 暴露出一个 run 函数，调用 run 函数会调用传入 ReactiveEffect 的 `fn`</span></span>
<span data-line=""><span style="color:#7F848E;font-style:italic">// 如果传入 ReactiveEffect 的第二个参数有值，会优先调用 scheduler，即</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">class</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">ReactiveEffect</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">constructor</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">fn</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">scheduler</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">fn</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">fn</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">scheduler</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E06C75">scheduler</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">run</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">fn</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">effect</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">new</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">ReactiveEffect</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">getter</span><span style="color:#ABB2BF">, () </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_dirty</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#ABB2BF">    </span><span style="color:#E5C07B">this</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">_dirty</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">true</span></span>
<span data-line=""><span style="color:#ABB2BF">  }</span></span>
<span data-line=""><span style="color:#ABB2BF">})</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">if</span><span style="color:#ABB2BF"> (</span><span style="color:#E5C07B">effect</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">scheduler</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">effect</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">scheduler</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">} </span><span style="color:#C678DD">else</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">effect</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">run</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></div>
<p>数据变更后，当前 <code>_dirty</code> 为 <code>false</code> ，代表缓存状态，将 <code>_dirty</code> 为 <code>true</code>，然后依赖此<code>computed</code> 数据的其他监听者重新执行， <code>a.value</code> 调用 <code>get value()</code>。</p>
<h1 id="总结"><a href="#总结">总结</a></h1>
<p>主要相关的就三个 <code>_dirty</code> <code>_value</code> <code>传入 ReactiveEffect 的第二个参数</code>，访问 <code>computed</code> 数据的时候，如果 <code>_dirty</code> 不为真，就使用缓存值，<code>computed</code> 监听的响应式数据变更，调用传入 ReactiveEffect 的第二个参数，将<code>_dirty</code>变为真，再次访问 <code>computed</code> 数据就重新获取值</p></div></div></div></div><div class="w-full flex justify-center text-22px h-28px pt-12px border-t-2px border-t-solid flex-shrink-0 lt-md:mt-1 lt-md:mb-12px"><a href="https://github.com/a145789" target="_blank" rel="noreferrer noopener" class="mx-6px"><div class="i-uil-github-alt hover:i-mingcute-github-fill transition-all duration-200"></div></a><div class="i-ph-moon-stars-fill dark:i-ic-baseline-light-mode mx-6px cursor-pointer transition-all duration-200"></div></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"data":{"createdAt":"2023/04/05 17:12","label":"面试一二三","slug":"computed 为啥可以缓存"},"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    a: \"a\",\n    div: \"div\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    p: \"p\",\n    blockquote: \"blockquote\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      id: \"源码解析\",\n      children: _jsx(_components.a, {\n        href: \"#源码解析\",\n        children: \"源码解析\"\n      })\n    }), \"\\n\", _jsxs(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: [_jsx(_components.pre, {\n        className: \"vitesse-dark\",\n        tabIndex: \"0\",\n        \"data-language\": \"js\",\n        \"data-theme\": \"dark\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"js\",\n          \"data-theme\": \"dark\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"a\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"computed\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(()\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"b\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4C9A91\"\n              },\n              children: \"1\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"})\"\n            })\n          })]\n        })\n      }), _jsx(_components.pre, {\n        className: \"one-dark-pro\",\n        tabIndex: \"0\",\n        \"data-language\": \"js\",\n        \"data-theme\": \"light\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"js\",\n          \"data-theme\": \"light\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"a\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"computed\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(() \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"=\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"b\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"})\"\n            })\n          })]\n        })\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"往 \", _jsx(_components.code, {\n        children: \"computed\"\n      }), \" 中传入一个 \", _jsx(_components.code, {\n        children: \"getter\"\n      }), \"，对应的 \", _jsx(_components.code, {\n        children: \"Vue\"\n      }), \" 源码为\"]\n    }), \"\\n\", _jsxs(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: [_jsx(_components.pre, {\n        className: \"vitesse-dark\",\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"dark\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"dark\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#758575DD\"\n              },\n              children: \"// 简化后的代码\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"export\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"function\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"computed\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003e(\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"getterOrOptions\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"ComputedGetter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003e | \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"WritableComputedOptions\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"const \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"cRef\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" new \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"ComputedRefImpl\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"getter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"setter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"onlyGetter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" || !\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"setter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"isSSR\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"cRef\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"as\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"any\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      }), _jsx(_components.pre, {\n        className: \"one-dark-pro\",\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"light\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"light\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"// 简化后的代码\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"export\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"function\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"computed\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003e(\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\",\n                fontStyle: \"italic\"\n              },\n              children: \"getterOrOptions\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"ComputedGetter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003e | \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"WritableComputedOptions\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \") {\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"cRef\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"new\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"ComputedRefImpl\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"getter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"setter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"onlyGetter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"||\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"setter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"isSSR\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"cRef\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"as\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"any\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"通过初始化 \", _jsx(_components.code, {\n        children: \"ComputedRefImpl\"\n      }), \" 得到一个实例。\"]\n    }), \"\\n\", _jsxs(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: [_jsx(_components.pre, {\n        className: \"vitesse-dark\",\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"dark\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"dark\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"export\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"class\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"ComputedRefImpl\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"private\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"T\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"public\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"readonly\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"public\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"true\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"constructor\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"getter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"ComputedGetter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003e)\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"new\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"getter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"      \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"true\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"triggerRefValue\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"      \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"})\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"computed\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"get\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#758575DD\"\n              },\n              children: \"// the computed ref may get wrapped by other proxies e.g. readonly() #3376\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"const \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"toRaw\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"trackRefValue\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"||\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_cacheable\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"      \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"false\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"      \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"run\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"!\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_value\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      }), _jsx(_components.pre, {\n        className: \"one-dark-pro\",\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"light\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"light\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"export\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"class\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"ComputedRefImpl\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003e {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"private\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"!: \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"T\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"public\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"readonly\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"public\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"true\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"constructor\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\",\n                fontStyle: \"italic\"\n              },\n              children: \"getter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"ComputedGetter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003e) {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"new\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"getter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", () \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"=\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"      \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \") {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"true\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"        \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"triggerRefValue\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"      }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    })\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"computed\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"get\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"() {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"// the computed ref may get wrapped by other proxies e.g. readonly() #3376\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"toRaw\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"trackRefValue\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"||\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_cacheable\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \") {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"      \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"false\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"      \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"run\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"!\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    }\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_value\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"ComputedRefImpl\"\n      }), \" 内部有两个属性：一个是 \", _jsx(_components.code, {\n        children: \"_value\"\n      }), \"，一个是 \", _jsx(_components.code, {\n        children: \"_dirty\"\n      }), \"。\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"当访问 \", _jsx(_components.code, {\n        children: \"a.value\"\n      }), \" 时，会触发 \", _jsx(_components.code, {\n        children: \"get value()\"\n      }), \"，\"]\n    }), \"\\n\", _jsxs(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: [_jsx(_components.pre, {\n        className: \"vitesse-dark\",\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"dark\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"dark\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"export\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"class\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"ComputedRefImpl\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"private\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"T\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"public\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"true\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"get\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"const \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"toRaw\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"      \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"false\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"      \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"run\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"!\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_value\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      }), _jsx(_components.pre, {\n        className: \"one-dark-pro\",\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"light\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"light\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"export\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"class\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"ComputedRefImpl\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"\u003e {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"private\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"!: \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"T\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"public\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"true\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"get\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"() {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"toRaw\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \") {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"      \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"false\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"      \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"run\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"!\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    }\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_value\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      })]\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsxs(_components.p, {\n        children: [\"如果 \", _jsx(_components.code, {\n          children: \"_dirty\"\n        }), \" 为 \", _jsx(_components.code, {\n          children: \"true\"\n        }), \"，代表需要获取新值，则重新执行 \", _jsx(_components.code, {\n          children: \"getter\"\n        }), \" 获取到新值赋值到 \", _jsx(_components.code, {\n          children: \"_value\"\n        }), \" 上，并且把 \", _jsx(_components.code, {\n          children: \"_dirty\"\n        }), \" 变为 \", _jsx(_components.code, {\n          children: \"false\"\n        }), \" ，下次再获取这个值的时候就用缓存的值。\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"而初始化的时候会在 \", _jsx(_components.code, {\n        children: \"constructor\"\n      }), \" 中实例化一个 \", _jsx(_components.code, {\n        children: \"ReactiveEffect\"\n      }), \"，其作用是将实例化后得出来的 \", _jsx(_components.code, {\n        children: \"effect\"\n      }), \" 作为 \", _jsx(_components.code, {\n        children: \"dep\"\n      }), \" 添加到依赖的响应式数据中，一旦响应式数据变更，触发此 \", _jsx(_components.code, {\n        children: \"dep\"\n      }), \"，\", _jsx(_components.code, {\n        children: \"ReactiveEffect\"\n      }), \" 接受两个参数，第一个是 \", _jsx(_components.code, {\n        children: \"fn\"\n      }), \"，第二个是 \", _jsx(_components.code, {\n        children: \"scheduler\"\n      }), \"，一个可以自定义的调用函数。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"响应式数据变化后的流程为：\"\n    }), \"\\n\", _jsxs(_components.div, {\n      \"data-rehype-pretty-code-fragment\": \"\",\n      children: [_jsx(_components.pre, {\n        className: \"vitesse-dark\",\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"dark\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"dark\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"const \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"b\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"ref\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4C9A91\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"const \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"a\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"computed\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(()\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"b\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" + \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4C9A91\"\n              },\n              children: \"1\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"})\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"b\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4C9A91\"\n              },\n              children: \"10\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#758575DD\"\n              },\n              children: \"// b.value 变更，触发 a 放在 b.value 的 dep ，即 ReactiveEffect 实例化出的 effect\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#758575DD\"\n              },\n              children: \"// effect 暴露出一个 run 函数，调用 run 函数会调用传入 ReactiveEffect 的 `fn`\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#758575DD\"\n              },\n              children: \"// 如果传入 ReactiveEffect 的第二个参数有值，会优先调用 scheduler，即\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"class\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#5DA994\"\n              },\n              children: \"ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"constructor\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"fn\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"scheduler\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"fn\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"fn\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"scheduler\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"scheduler\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"run\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"fn\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"()\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"const \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" new \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"getter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C99076\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"true\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#CB7676\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"})\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"scheduler\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"scheduler\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"()\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#4D9375\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"{\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#DBD7CAEE\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#BD976A\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#80A665\"\n              },\n              children: \"run\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"()\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#666666\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      }), _jsx(_components.pre, {\n        className: \"one-dark-pro\",\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"light\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"light\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"b\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"ref\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"a\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"computed\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(() \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"=\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"b\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"+\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"1\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"})\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"b\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"10\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"// b.value 变更，触发 a 放在 b.value 的 dep ，即 ReactiveEffect 实例化出的 effect\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"// effect 暴露出一个 run 函数，调用 run 函数会调用传入 ReactiveEffect 的 `fn`\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#7F848E\",\n                fontStyle: \"italic\"\n              },\n              children: \"// 如果传入 ReactiveEffect 的第二个参数有值，会优先调用 scheduler，即\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"class\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"constructor\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\",\n                fontStyle: \"italic\"\n              },\n              children: \"fn\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\",\n                fontStyle: \"italic\"\n              },\n              children: \"scheduler\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \") {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"fn\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"fn\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"scheduler\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"scheduler\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"run\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"() {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"return\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"fn\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"()\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"}\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"new\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"getter\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \", () \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"=\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \") {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"    \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#56B6C2\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#D19A66\"\n              },\n              children: \"true\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"})\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E06C75\"\n              },\n              children: \"scheduler\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \") {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"scheduler\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"()\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"} \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#C678DD\"\n              },\n              children: \"else\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"  \"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#E5C07B\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#61AFEF\"\n              },\n              children: \"run\"\n            }), _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"()\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                color: \"#ABB2BF\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"数据变更后，当前 \", _jsx(_components.code, {\n        children: \"_dirty\"\n      }), \" 为 \", _jsx(_components.code, {\n        children: \"false\"\n      }), \" ，代表缓存状态，将 \", _jsx(_components.code, {\n        children: \"_dirty\"\n      }), \" 为 \", _jsx(_components.code, {\n        children: \"true\"\n      }), \"，然后依赖此\", _jsx(_components.code, {\n        children: \"computed\"\n      }), \" 数据的其他监听者重新执行， \", _jsx(_components.code, {\n        children: \"a.value\"\n      }), \" 调用 \", _jsx(_components.code, {\n        children: \"get value()\"\n      }), \"。\"]\n    }), \"\\n\", _jsx(_components.h1, {\n      id: \"总结\",\n      children: _jsx(_components.a, {\n        href: \"#总结\",\n        children: \"总结\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"主要相关的就三个 \", _jsx(_components.code, {\n        children: \"_dirty\"\n      }), \" \", _jsx(_components.code, {\n        children: \"_value\"\n      }), \" \", _jsx(_components.code, {\n        children: \"传入 ReactiveEffect 的第二个参数\"\n      }), \"，访问 \", _jsx(_components.code, {\n        children: \"computed\"\n      }), \" 数据的时候，如果 \", _jsx(_components.code, {\n        children: \"_dirty\"\n      }), \" 不为真，就使用缓存值，\", _jsx(_components.code, {\n        children: \"computed\"\n      }), \" 监听的响应式数据变更，调用传入 ReactiveEffect 的第二个参数，将\", _jsx(_components.code, {\n        children: \"_dirty\"\n      }), \"变为真，再次访问 \", _jsx(_components.code, {\n        children: \"computed\"\n      }), \" 数据就重新获取值\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{"createdAt":"2023/04/05 17:12"}}},"__N_SSG":true},"page":"/blog/[label]/[slug]","query":{"label":"面试一二三","slug":"computed 为啥可以缓存"},"buildId":"kwz5PDhmZanNeXhNFpSTQ","assetPrefix":"/aboutme","isFallback":false,"dynamicIds":[3055],"gsp":true,"scriptLoader":[]}</script></body></html>