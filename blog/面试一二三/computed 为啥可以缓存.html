<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="description" content="Generated by create next app"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico"/><title>computed 为啥可以缓存</title><meta name="next-head-count" content="5"/><link rel="preload" href="/aboutme/_next/static/media/4291f48c2ea51320-s.p.ttf" as="font" type="font/ttf" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/aboutme/_next/static/css/002fb1c59c07c941.css" as="style" crossorigin=""/><link rel="stylesheet" href="/aboutme/_next/static/css/002fb1c59c07c941.css" crossorigin="" data-n-g=""/><link rel="preload" href="/aboutme/_next/static/css/7da977a8614c23e6.css" as="style" crossorigin=""/><link rel="stylesheet" href="/aboutme/_next/static/css/7da977a8614c23e6.css" crossorigin=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/aboutme/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="/aboutme/_next/static/chunks/357.67b68cb489fa9356.js" crossorigin=""></script><script src="/aboutme/_next/static/chunks/webpack-38bd353072988c53.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/chunks/framework-d5e71597b55b8bd8.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/chunks/main-d13d2449c3309568.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/chunks/pages/_app-8ef81a2c62d2d3c9.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/chunks/pages/blog/%5Blabel%5D/%5Bslug%5D-b7c39696de784dc7.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/A2gySWArfbWDtn-vzpW_j/_buildManifest.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/A2gySWArfbWDtn-vzpW_j/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="dark:bg-#060606 dark:text-gray-200 bg-#fdfdfd transition-all w-full h-full __variable_e856ef"><div class="w-1300px h-full mx-auto flex justify-center items-center  transition-colors flex-row lt-md:flex-col lt-md:w-full"><ul class="relative z-1 lt-md:flex lt-md:justify-center lt-md:mt-12px lt-md:pb-12px lt-md:shadow-md lt-md:w-full flex-shrink-0"><li class="py-6px px-10px my-8px font-sans transition-colors lt-md:mx-4px lt-md:my-0 text-neutral-500"><a rel="noreferrer" href="/aboutme">home</a></li><li class="py-6px px-10px my-8px font-sans transition-colors lt-md:mx-4px lt-md:my-0 font-bold"><a rel="noreferrer" href="/aboutme/blog">blog</a></li><li class="py-6px px-10px my-8px font-sans transition-colors lt-md:mx-4px lt-md:my-0 text-neutral-500"><a rel="noreferrer" href="/aboutme/about">about</a></li></ul><main class="w-800px md:h-full lt-md:flex-1 pb-24px lt-md:pb-0 box-border flex flex-col items-center lt-md:w-full ml-26px lt-md:ml-0 lt-md:overflow-y-hidden"><div class="w-full flex-1 overflow-y-auto"><div class="md:h-full overflow-y-auto md:scrollbar~"><div class="mt-40px mb-20px lt-md:mt-16px lt-md:mx-10px"><h1 class="font-bold text-3xl font-serif">computed 为啥可以缓存</h1><div class="my-10px"><span class="font-mono text-sm bg-neutral-100 dark:bg-neutral-800 rounded-md px-2 py-1 tracking-tighter">2023/04/05 17:12</span></div><div class="mdx_mdx__tEkiT"><h1 id="源码解析"><a href="#源码解析">源码解析</a></h1>
<figure data-rehype-pretty-code-figure=""><pre class="Lambda Studio — Whiteout" style="--shiki-dark:#dbd7caee;--shiki-light:#000;--shiki-dark-bg:#121212;--shiki-light-bg:#fff" tabindex="0" data-language="js" data-theme="vitesse-dark Lambda Studio — Whiteout"><code data-language="js" data-theme="vitesse-dark Lambda Studio — Whiteout" style="display:grid"><span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">const</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> a</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#80A665;--shiki-light:#000"> computed</span><span style="--shiki-dark:#666666;--shiki-light:#0008">(()</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =&gt;</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">  return</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> b</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">value</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> +</span><span style="--shiki-dark:#4C9A91;--shiki-light:#0008"> 1</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">})</span></span></code></pre></figure>
<p>往 <code>computed</code> 中传入一个 <code>getter</code>，对应的 <code>Vue</code> 源码为</p>
<figure data-rehype-pretty-code-figure=""><pre class="Lambda Studio — Whiteout" style="--shiki-dark:#dbd7caee;--shiki-light:#000;--shiki-dark-bg:#121212;--shiki-light-bg:#fff" tabindex="0" data-language="ts" data-theme="vitesse-dark Lambda Studio — Whiteout"><code data-language="ts" data-theme="vitesse-dark Lambda Studio — Whiteout" style="display:grid"><span data-line=""><span style="--shiki-dark:#758575DD;--shiki-light:#0008">//</span><span style="--shiki-dark:#758575DD;--shiki-light:#0004"> 简化后的代码</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">export</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> function</span><span style="--shiki-dark:#80A665;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold"> computed</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&lt;</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold">T</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&gt;(</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#000">  getterOrOptions</span><span style="--shiki-dark:#666666;--shiki-light:#0008">:</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold"> ComputedGetter</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&lt;</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold">T</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&gt;</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> |</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold"> WritableComputedOptions</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&lt;</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold">T</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">  const</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> cRef</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> new</span><span style="--shiki-dark:#80A665;--shiki-light:#000"> ComputedRefImpl</span><span style="--shiki-dark:#666666;--shiki-light:#0008">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">getter</span><span style="--shiki-dark:#666666;--shiki-light:#0008">,</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> setter</span><span style="--shiki-dark:#666666;--shiki-light:#0008">,</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> onlyGetter</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> ||</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> !</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">setter</span><span style="--shiki-dark:#666666;--shiki-light:#0008">,</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> isSSR</span><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">  return</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> cRef</span><span style="--shiki-dark:#4D9375;--shiki-light:#0008"> as</span><span style="--shiki-dark:#5DA994;--shiki-light:#000"> any</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">}</span></span></code></pre></figure>
<p>通过初始化 <code>ComputedRefImpl</code> 得到一个实例。</p>
<figure data-rehype-pretty-code-figure=""><pre class="Lambda Studio — Whiteout" style="--shiki-dark:#dbd7caee;--shiki-light:#000;--shiki-dark-bg:#121212;--shiki-light-bg:#fff" tabindex="0" data-language="ts" data-theme="vitesse-dark Lambda Studio — Whiteout"><code data-language="ts" data-theme="vitesse-dark Lambda Studio — Whiteout" style="display:grid"><span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">export</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> class</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold"> ComputedRefImpl</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&lt;</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold">T</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&gt;</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">  private</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> _value</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008">!</span><span style="--shiki-dark:#666666;--shiki-light:#0008">:</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold"> T</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">  public</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> readonly</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> effect</span><span style="--shiki-dark:#666666;--shiki-light:#0008">:</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold"> ReactiveEffect</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&lt;</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold">T</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&gt;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">  public</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> _dirty</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#4D9375;--shiki-light:#0008"> true</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">  constructor</span><span style="--shiki-dark:#666666;--shiki-light:#0008">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">getter</span><span style="--shiki-dark:#666666;--shiki-light:#0008">:</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold"> ComputedGetter</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&lt;</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold">T</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&gt;)</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#C99076;--shiki-light:#000">    this</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">effect</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> new</span><span style="--shiki-dark:#80A665;--shiki-light:#000"> ReactiveEffect</span><span style="--shiki-dark:#666666;--shiki-light:#0008">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">getter</span><span style="--shiki-dark:#666666;--shiki-light:#0008">,</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> ()</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =&gt;</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">      if</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> (</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008">!</span><span style="--shiki-dark:#C99076;--shiki-light:#000">this</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_dirty</span><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#C99076;--shiki-light:#000">        this</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_dirty</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#4D9375;--shiki-light:#0008"> true</span></span>
<span data-line=""><span style="--shiki-dark:#80A665;--shiki-light:#000">        triggerRefValue</span><span style="--shiki-dark:#666666;--shiki-light:#0008">(</span><span style="--shiki-dark:#C99076;--shiki-light:#000">this</span><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">      }</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">    })</span></span>
<span data-line=""><span style="--shiki-dark:#C99076;--shiki-light:#000">    this</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">effect</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">computed</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#C99076;--shiki-light:#000"> this</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">  get</span><span style="--shiki-dark:#80A665;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold"> value</span><span style="--shiki-dark:#666666;--shiki-light:#0008">()</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#758575DD;--shiki-light:#0008">    //</span><span style="--shiki-dark:#758575DD;--shiki-light:#0004"> the computed ref may get wrapped by other proxies e.g. readonly() #3376</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">    const</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> self</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#80A665;--shiki-light:#000"> toRaw</span><span style="--shiki-dark:#666666;--shiki-light:#0008">(</span><span style="--shiki-dark:#C99076;--shiki-light:#000">this</span><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span></span>
<span data-line=""><span style="--shiki-dark:#80A665;--shiki-light:#000">    trackRefValue</span><span style="--shiki-dark:#666666;--shiki-light:#0008">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">self</span><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">    if</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> (</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">self</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_dirty</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> ||</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> !</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">self</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_cacheable</span><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#000">      self</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_dirty</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#4D9375;--shiki-light:#0008"> false</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#000">      self</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_value</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> self</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">effect</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#80A665;--shiki-light:#000">run</span><span style="--shiki-dark:#666666;--shiki-light:#0008">()</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008">!</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">    }</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">    return</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> self</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_value</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">  }</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">}</span></span></code></pre></figure>
<p><code>ComputedRefImpl</code> 内部有两个属性：一个是 <code>_value</code>，一个是 <code>_dirty</code>。</p>
<p>当访问 <code>a.value</code> 时，会触发 <code>get value()</code>，</p>
<figure data-rehype-pretty-code-figure=""><pre class="Lambda Studio — Whiteout" style="--shiki-dark:#dbd7caee;--shiki-light:#000;--shiki-dark-bg:#121212;--shiki-light-bg:#fff" tabindex="0" data-language="ts" data-theme="vitesse-dark Lambda Studio — Whiteout"><code data-language="ts" data-theme="vitesse-dark Lambda Studio — Whiteout" style="display:grid"><span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">export</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> class</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold"> ComputedRefImpl</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&lt;</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold">T</span><span style="--shiki-dark:#666666;--shiki-light:#0008">&gt;</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">  private</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> _value</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008">!</span><span style="--shiki-dark:#666666;--shiki-light:#0008">:</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold"> T</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">  public</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> _dirty</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#4D9375;--shiki-light:#0008"> true</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">  get</span><span style="--shiki-dark:#80A665;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold"> value</span><span style="--shiki-dark:#666666;--shiki-light:#0008">()</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">    const</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> self</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#80A665;--shiki-light:#000"> toRaw</span><span style="--shiki-dark:#666666;--shiki-light:#0008">(</span><span style="--shiki-dark:#C99076;--shiki-light:#000">this</span><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">    if</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> (</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">self</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_dirty</span><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#000">      self</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_dirty</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#4D9375;--shiki-light:#0008"> false</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#000">      self</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_value</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> self</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">effect</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#80A665;--shiki-light:#000">run</span><span style="--shiki-dark:#666666;--shiki-light:#0008">()</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008">!</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">    }</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">    return</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> self</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_value</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">  }</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">}</span></span></code></pre></figure>
<blockquote>
<p>如果 <code>_dirty</code> 为 <code>true</code>，代表需要获取新值，则重新执行 <code>getter</code> 获取到新值赋值到 <code>_value</code> 上，并且把 <code>_dirty</code> 变为 <code>false</code> ，下次再获取这个值的时候就用缓存的值。</p>
</blockquote>
<p>而初始化的时候会在 <code>constructor</code> 中实例化一个 <code>ReactiveEffect</code>，其作用是将实例化后得出来的 <code>effect</code> 作为 <code>dep</code> 添加到依赖的响应式数据中，一旦响应式数据变更，触发此 <code>dep</code>，<code>ReactiveEffect</code> 接受两个参数，第一个是 <code>fn</code>，第二个是 <code>scheduler</code>，一个可以自定义的调用函数。</p>
<p>响应式数据变化后的流程为：</p>
<figure data-rehype-pretty-code-figure=""><pre class="Lambda Studio — Whiteout" style="--shiki-dark:#dbd7caee;--shiki-light:#000;--shiki-dark-bg:#121212;--shiki-light-bg:#fff" tabindex="0" data-language="ts" data-theme="vitesse-dark Lambda Studio — Whiteout"><code data-language="ts" data-theme="vitesse-dark Lambda Studio — Whiteout" style="display:grid"><span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">const</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> b</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#80A665;--shiki-light:#000"> ref</span><span style="--shiki-dark:#666666;--shiki-light:#0008">(</span><span style="--shiki-dark:#4C9A91;--shiki-light:#0008">0</span><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">const</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> a</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#80A665;--shiki-light:#000"> computed</span><span style="--shiki-dark:#666666;--shiki-light:#0008">(()</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =&gt;</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">  return</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> b</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">value</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> +</span><span style="--shiki-dark:#4C9A91;--shiki-light:#0008"> 1</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">})</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#000">b</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">value</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#4C9A91;--shiki-light:#0008"> 10</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#758575DD;--shiki-light:#0008">//</span><span style="--shiki-dark:#758575DD;--shiki-light:#0004"> b.value 变更，触发 a 放在 b.value 的 dep ，即 ReactiveEffect 实例化出的 effect</span></span>
<span data-line=""><span style="--shiki-dark:#758575DD;--shiki-light:#0008">//</span><span style="--shiki-dark:#758575DD;--shiki-light:#0004"> effect 暴露出一个 run 函数，调用 run 函数会调用传入 ReactiveEffect 的 `fn`</span></span>
<span data-line=""><span style="--shiki-dark:#758575DD;--shiki-light:#0008">//</span><span style="--shiki-dark:#758575DD;--shiki-light:#0004"> 如果传入 ReactiveEffect 的第二个参数有值，会优先调用 scheduler，即</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">class</span><span style="--shiki-dark:#5DA994;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold"> ReactiveEffect</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">  constructor</span><span style="--shiki-dark:#666666;--shiki-light:#0008">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">fn</span><span style="--shiki-dark:#666666;--shiki-light:#0008">,</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> scheduler</span><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#C99076;--shiki-light:#000">    this</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">fn</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> fn</span></span>
<span data-line=""><span style="--shiki-dark:#C99076;--shiki-light:#000">    this</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">scheduler</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> scheduler</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#80A665;--shiki-light:#000;--shiki-dark-font-weight:inherit;--shiki-light-font-weight:bold">  run</span><span style="--shiki-dark:#666666;--shiki-light:#0008">()</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">    return</span><span style="--shiki-dark:#C99076;--shiki-light:#000"> this</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#80A665;--shiki-light:#000">fn</span><span style="--shiki-dark:#666666;--shiki-light:#0008">()</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">  }</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#0008">const</span><span style="--shiki-dark:#BD976A;--shiki-light:#000"> effect</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008"> new</span><span style="--shiki-dark:#80A665;--shiki-light:#000"> ReactiveEffect</span><span style="--shiki-dark:#666666;--shiki-light:#0008">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">getter</span><span style="--shiki-dark:#666666;--shiki-light:#0008">,</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> ()</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =&gt;</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">  if</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> (</span><span style="--shiki-dark:#CB7676;--shiki-light:#0008">!</span><span style="--shiki-dark:#C99076;--shiki-light:#000">this</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_dirty</span><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#C99076;--shiki-light:#000">    this</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">_dirty</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> =</span><span style="--shiki-dark:#4D9375;--shiki-light:#0008"> true</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">  }</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">})</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#0008">if</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> (</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">effect</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#000">scheduler</span><span style="--shiki-dark:#666666;--shiki-light:#0008">)</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#000">  effect</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#80A665;--shiki-light:#000">scheduler</span><span style="--shiki-dark:#666666;--shiki-light:#0008">()</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">}</span><span style="--shiki-dark:#4D9375;--shiki-light:#0008"> else</span><span style="--shiki-dark:#666666;--shiki-light:#0008"> {</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#000">  effect</span><span style="--shiki-dark:#666666;--shiki-light:#0008">.</span><span style="--shiki-dark:#80A665;--shiki-light:#000">run</span><span style="--shiki-dark:#666666;--shiki-light:#0008">()</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#0008">}</span></span></code></pre></figure>
<p>数据变更后，当前 <code>_dirty</code> 为 <code>false</code> ，代表缓存状态，将 <code>_dirty</code> 为 <code>true</code>，然后依赖此<code>computed</code> 数据的其他监听者重新执行， <code>a.value</code> 调用 <code>get value()</code>。</p>
<h1 id="总结"><a href="#总结">总结</a></h1>
<p>主要相关的就三个 <code>_dirty</code> <code>_value</code> <code>传入 ReactiveEffect 的第二个参数</code>，访问 <code>computed</code> 数据的时候，如果 <code>_dirty</code> 不为真，就使用缓存值，<code>computed</code> 监听的响应式数据变更，调用传入 ReactiveEffect 的第二个参数，将<code>_dirty</code>变为真，再次访问 <code>computed</code> 数据就重新获取值</p></div></div></div></div><div class="w-full flex justify-center text-22px h-28px pt-12px border-t-2px border-t-solid flex-shrink-0 lt-md:mt-1 lt-md:mb-12px"><a href="https://github.com/a145789" target="_blank" rel="noreferrer noopener" class="mx-6px"><div class="i-uil-github-alt hover:i-mingcute-github-fill transition-all duration-200"></div></a><div class="i-ph-moon-stars-fill dark:i-ic-baseline-light-mode mx-6px cursor-pointer transition-all duration-200"></div></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"data":{"createdAt":"2023/04/05 17:12","label":"面试一二三","slug":"computed 为啥可以缓存"},"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    a: \"a\",\n    figure: \"figure\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    p: \"p\",\n    blockquote: \"blockquote\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      id: \"源码解析\",\n      children: _jsx(_components.a, {\n        href: \"#源码解析\",\n        children: \"源码解析\"\n      })\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        className: \"Lambda Studio — Whiteout\",\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#000\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#fff\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"js\",\n        \"data-theme\": \"vitesse-dark Lambda Studio — Whiteout\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"js\",\n          \"data-theme\": \"vitesse-dark Lambda Studio — Whiteout\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" a\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" computed\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"(()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  return\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" b\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" +\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4C9A91\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" 1\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"})\"\n            })\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"往 \", _jsx(_components.code, {\n        children: \"computed\"\n      }), \" 中传入一个 \", _jsx(_components.code, {\n        children: \"getter\"\n      }), \"，对应的 \", _jsx(_components.code, {\n        children: \"Vue\"\n      }), \" 源码为\"]\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        className: \"Lambda Studio — Whiteout\",\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#000\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#fff\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"vitesse-dark Lambda Studio — Whiteout\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"vitesse-dark Lambda Studio — Whiteout\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"//\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#0004\"\n              },\n              children: \" 简化后的代码\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"export\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" function\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \" computed\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003e(\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"  getterOrOptions\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \":\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \" ComputedGetter\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" |\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \" WritableComputedOptions\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" cRef\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" new\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" ComputedRefImpl\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"getter\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" setter\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" onlyGetter\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" ||\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" !\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"setter\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" isSSR\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  return\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" cRef\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" as\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" any\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"通过初始化 \", _jsx(_components.code, {\n        children: \"ComputedRefImpl\"\n      }), \" 得到一个实例。\"]\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        className: \"Lambda Studio — Whiteout\",\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#000\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#fff\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"vitesse-dark Lambda Studio — Whiteout\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"vitesse-dark Lambda Studio — Whiteout\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"export\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" class\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \" ComputedRefImpl\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  private\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" _value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \":\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \" T\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  public\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" readonly\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" effect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \":\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \" ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  public\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" _dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" true\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  constructor\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"getter\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \":\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \" ComputedGetter\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003e)\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"    this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" new\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"getter\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" ()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"      if\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"        this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" true\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"        triggerRefValue\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"      }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"    })\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"    this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"computed\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" this\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  get\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \" value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"    //\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#0004\"\n              },\n              children: \" the computed ref may get wrapped by other proxies e.g. readonly() #3376\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"    const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" toRaw\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"    trackRefValue\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"    if\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" ||\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" !\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_cacheable\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"      self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" false\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"      self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"run\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"!\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"    }\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"    return\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_value\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"ComputedRefImpl\"\n      }), \" 内部有两个属性：一个是 \", _jsx(_components.code, {\n        children: \"_value\"\n      }), \"，一个是 \", _jsx(_components.code, {\n        children: \"_dirty\"\n      }), \"。\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"当访问 \", _jsx(_components.code, {\n        children: \"a.value\"\n      }), \" 时，会触发 \", _jsx(_components.code, {\n        children: \"get value()\"\n      }), \"，\"]\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        className: \"Lambda Studio — Whiteout\",\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#000\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#fff\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"vitesse-dark Lambda Studio — Whiteout\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"vitesse-dark Lambda Studio — Whiteout\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"export\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" class\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \" ComputedRefImpl\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  private\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" _value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \":\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \" T\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  public\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" _dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" true\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  get\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \" value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"    const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" toRaw\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"    if\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"      self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" false\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"      self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"run\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"!\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"    }\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"    return\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" self\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_value\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsxs(_components.p, {\n        children: [\"如果 \", _jsx(_components.code, {\n          children: \"_dirty\"\n        }), \" 为 \", _jsx(_components.code, {\n          children: \"true\"\n        }), \"，代表需要获取新值，则重新执行 \", _jsx(_components.code, {\n          children: \"getter\"\n        }), \" 获取到新值赋值到 \", _jsx(_components.code, {\n          children: \"_value\"\n        }), \" 上，并且把 \", _jsx(_components.code, {\n          children: \"_dirty\"\n        }), \" 变为 \", _jsx(_components.code, {\n          children: \"false\"\n        }), \" ，下次再获取这个值的时候就用缓存的值。\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"而初始化的时候会在 \", _jsx(_components.code, {\n        children: \"constructor\"\n      }), \" 中实例化一个 \", _jsx(_components.code, {\n        children: \"ReactiveEffect\"\n      }), \"，其作用是将实例化后得出来的 \", _jsx(_components.code, {\n        children: \"effect\"\n      }), \" 作为 \", _jsx(_components.code, {\n        children: \"dep\"\n      }), \" 添加到依赖的响应式数据中，一旦响应式数据变更，触发此 \", _jsx(_components.code, {\n        children: \"dep\"\n      }), \"，\", _jsx(_components.code, {\n        children: \"ReactiveEffect\"\n      }), \" 接受两个参数，第一个是 \", _jsx(_components.code, {\n        children: \"fn\"\n      }), \"，第二个是 \", _jsx(_components.code, {\n        children: \"scheduler\"\n      }), \"，一个可以自定义的调用函数。\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"响应式数据变化后的流程为：\"\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        className: \"Lambda Studio — Whiteout\",\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#000\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#fff\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"vitesse-dark Lambda Studio — Whiteout\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"vitesse-dark Lambda Studio — Whiteout\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" b\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" ref\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4C9A91\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"0\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" a\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" computed\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"(()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  return\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" b\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" +\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4C9A91\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" 1\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"})\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"b\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4C9A91\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" 10\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"//\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#0004\"\n              },\n              children: \" b.value 变更，触发 a 放在 b.value 的 dep ，即 ReactiveEffect 实例化出的 effect\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"//\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#0004\"\n              },\n              children: \" effect 暴露出一个 run 函数，调用 run 函数会调用传入 ReactiveEffect 的 `fn`\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"//\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#0004\"\n              },\n              children: \" 如果传入 ReactiveEffect 的第二个参数有值，会优先调用 scheduler，即\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"class\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \" ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  constructor\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" scheduler\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"    this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" fn\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"    this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"scheduler\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" scheduler\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\",\n                \"--shiki-dark-font-weight\": \"inherit\",\n                \"--shiki-light-font-weight\": \"bold\"\n              },\n              children: \"  run\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"    return\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"()\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"}\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" effect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" new\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \" ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"getter\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" ()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  if\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"    this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"_dirty\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" true\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"})\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"if\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"scheduler\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"  effect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"scheduler\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"()\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"}\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" else\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"  effect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#000\"\n              },\n              children: \"run\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"()\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#0008\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"数据变更后，当前 \", _jsx(_components.code, {\n        children: \"_dirty\"\n      }), \" 为 \", _jsx(_components.code, {\n        children: \"false\"\n      }), \" ，代表缓存状态，将 \", _jsx(_components.code, {\n        children: \"_dirty\"\n      }), \" 为 \", _jsx(_components.code, {\n        children: \"true\"\n      }), \"，然后依赖此\", _jsx(_components.code, {\n        children: \"computed\"\n      }), \" 数据的其他监听者重新执行， \", _jsx(_components.code, {\n        children: \"a.value\"\n      }), \" 调用 \", _jsx(_components.code, {\n        children: \"get value()\"\n      }), \"。\"]\n    }), \"\\n\", _jsx(_components.h1, {\n      id: \"总结\",\n      children: _jsx(_components.a, {\n        href: \"#总结\",\n        children: \"总结\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"主要相关的就三个 \", _jsx(_components.code, {\n        children: \"_dirty\"\n      }), \" \", _jsx(_components.code, {\n        children: \"_value\"\n      }), \" \", _jsx(_components.code, {\n        children: \"传入 ReactiveEffect 的第二个参数\"\n      }), \"，访问 \", _jsx(_components.code, {\n        children: \"computed\"\n      }), \" 数据的时候，如果 \", _jsx(_components.code, {\n        children: \"_dirty\"\n      }), \" 不为真，就使用缓存值，\", _jsx(_components.code, {\n        children: \"computed\"\n      }), \" 监听的响应式数据变更，调用传入 ReactiveEffect 的第二个参数，将\", _jsx(_components.code, {\n        children: \"_dirty\"\n      }), \"变为真，再次访问 \", _jsx(_components.code, {\n        children: \"computed\"\n      }), \" 数据就重新获取值\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{"createdAt":"2023/04/05 17:12"}}},"__N_SSG":true},"page":"/blog/[label]/[slug]","query":{"label":"面试一二三","slug":"computed 为啥可以缓存"},"buildId":"A2gySWArfbWDtn-vzpW_j","assetPrefix":"/aboutme","isFallback":false,"dynamicIds":[9357],"gsp":true,"scriptLoader":[]}</script></body></html>