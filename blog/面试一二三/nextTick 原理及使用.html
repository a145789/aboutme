<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="description" content="Generated by create next app"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico"/><title>nextTick 原理及使用</title><meta name="next-head-count" content="5"/><link rel="preload" href="/aboutme/_next/static/css/14d1c584a7ab5eec.css" as="style" crossorigin=""/><link rel="stylesheet" href="/aboutme/_next/static/css/14d1c584a7ab5eec.css" crossorigin="" data-n-g=""/><link rel="preload" href="/aboutme/_next/static/css/2d1045986acbd460.css" as="style" crossorigin=""/><link rel="stylesheet" href="/aboutme/_next/static/css/2d1045986acbd460.css" crossorigin=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/aboutme/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="/aboutme/_next/static/chunks/155.348203161cccf960.js" crossorigin=""></script><script src="/aboutme/_next/static/chunks/webpack-24f867bfe62eada7.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/chunks/framework-d5e71597b55b8bd8.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/chunks/main-3febc4072369dd28.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/chunks/pages/_app-e7cde3920b8c920c.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/chunks/pages/blog/%5Blabel%5D/%5Bslug%5D-8304bcfd6ee5bd33.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/dL7yXIowPwegpQkWBMGTD/_buildManifest.js" defer="" crossorigin=""></script><script src="/aboutme/_next/static/dL7yXIowPwegpQkWBMGTD/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="dark:bg-#060606 dark:text-gray-200 transition-all w-full h-full"><div class="w-1300px h-full mx-auto flex justify-center items-center  transition-colors flex-row lt-md:flex-col lt-md:w-full"><ul class="relative z-1 lt-md:flex lt-md:justify-center lt-md:mt-12px lt-md:pb-12px lt-md:shadow-md lt-md:w-full flex-shrink-0"><li class="py-6px px-10px my-8px font-sans transition-colors lt-md:mx-4px lt-md:my-0 text-neutral-500"><a rel="noreferrer" href="/aboutme">home</a></li><li class="py-6px px-10px my-8px font-sans transition-colors lt-md:mx-4px lt-md:my-0 font-bold"><a rel="noreferrer" href="/aboutme/blog">blog</a></li><li class="py-6px px-10px my-8px font-sans transition-colors lt-md:mx-4px lt-md:my-0 text-neutral-500"><a rel="noreferrer" href="/aboutme/about">about</a></li></ul><main class="w-800px md:h-full lt-md:flex-1 pb-24px lt-md:pb-0 box-border flex flex-col items-center lt-md:w-full ml-26px lt-md:ml-0 lt-md:overflow-y-hidden"><div class="w-full flex-1 overflow-y-auto"><div class="md:h-full overflow-y-auto md:scrollbar~"><div class="mt-40px mb-20px lt-md:mt-16px lt-md:mx-10px"><h1 class="font-bold text-3xl font-serif">nextTick 原理及使用</h1><div class="my-10px"><span class="font-mono text-sm bg-neutral-100 dark:bg-neutral-800 rounded-md px-2 py-1 tracking-tighter">2023/04/03 15:20</span></div><div class="mdx_mdx__tEkiT"><h1 id="nexttick-作用"><a href="#nexttick-作用">nextTick 作用</a></h1>
<p><code>vue</code> 官网对 <a href="https://cn.vuejs.org/api/general.html#nexttick" rel="noreferrer noopener" target="_blank">nextTick</a> 的介绍为 <strong>等待下一次 <code>DOM</code> 更新刷新的工具方法</strong>。首先什么是 <code>DOM</code> 更新。</p>
<h2 id="dom-更新"><a href="#dom-更新">Dom 更新</a></h2>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#dbd7caee;--shiki-light:#abb2bf;--shiki-dark-bg:#121212;--shiki-light-bg:#282c34" tabindex="0" data-language="js" data-theme="vitesse-dark one-dark-pro"><code data-language="js" data-theme="vitesse-dark one-dark-pro" style="display:grid"><span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">document</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">querySelector</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">div</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">).</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">innerHTML</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">Dom 更新</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">console</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">log</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">document</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">querySelector</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">div</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">).</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">innerHTML</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span><span style="--shiki-dark:#758575DD;--shiki-light:#7F848E;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic"> // 会输出 Dom 更新</span></span></code></pre></figure>
<p><code>Dom</code> 更新需要先对 <code>Dom</code> 对象上的属性做修改，例如修改某个节点 <code>innerHTML</code>，这一步是同步的，然后浏览器会异步更新 <code>DOM</code>。但对于 <code>Vue</code> 而言，响应式更新帮我们隐去了这一步。</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#dbd7caee;--shiki-light:#abb2bf;--shiki-dark-bg:#121212;--shiki-light-bg:#282c34" tabindex="0" data-language="html" data-theme="vitesse-dark one-dark-pro"><code data-language="html" data-theme="vitesse-dark one-dark-pro" style="display:grid"><span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">template</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  &lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">div</span><span style="--shiki-dark:#BD976A;--shiki-light:#D19A66"> class</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">=</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">aka</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#ABB2BF">{{a}}</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;/</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">div</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  &lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">button</span><span style="--shiki-dark:#BD976A;--shiki-light:#D19A66"> @click</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">=</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">fn</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#ABB2BF">click</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;/</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">button</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;/</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">template</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">script</span><span style="--shiki-dark:#BD976A;--shiki-light:#D19A66"> setup</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">  const</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> a</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> ref</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">  function</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> fn</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">()</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">    a</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">value</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379"> &quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">Dom 更新</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  }</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;/</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">script</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span></code></pre></figure>
<p>每次点击 <code>button</code> 更改 <code>a.value</code> 就会触发 <code>Dom</code> 更新。但如上文更改 <code>Dom</code> 属性是同步的，倘若代码是这样的</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#dbd7caee;--shiki-light:#abb2bf;--shiki-dark-bg:#121212;--shiki-light-bg:#282c34" tabindex="0" data-language="html" data-theme="vitesse-dark one-dark-pro"><code data-language="html" data-theme="vitesse-dark one-dark-pro" style="display:grid"><span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">template</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  &lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">div</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#ABB2BF">{{a}}|{{b}}</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;/</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">div</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  &lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">button</span><span style="--shiki-dark:#BD976A;--shiki-light:#D19A66"> @click</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">=</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">fn</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#ABB2BF">click</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;/</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">button</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;/</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">template</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">script</span><span style="--shiki-dark:#BD976A;--shiki-light:#D19A66"> setup</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">  const</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> a</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> ref</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">  const</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> b</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> ref</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">  function</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> fn</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">()</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#C678DD">    for</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> (</span><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">let</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> i</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#4C9A91;--shiki-light:#D19A66"> 1</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">;</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> i</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> &lt;=</span><span style="--shiki-dark:#4C9A91;--shiki-light:#D19A66"> 1000</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">;</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> i</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2">++</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">      a</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">value</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379"> `</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">Dom 更新, </span><span style="--shiki-dark:#666666;--shiki-light:#C678DD">${</span><span style="--shiki-dark:#C98A7D;--shiki-light:#E06C75">i</span><span style="--shiki-dark:#666666;--shiki-light:#C678DD">}</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">`</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">      b</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">value</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379"> `</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">Dom 更新, </span><span style="--shiki-dark:#666666;--shiki-light:#C678DD">${</span><span style="--shiki-dark:#C98A7D;--shiki-light:#E06C75">i</span><span style="--shiki-dark:#666666;--shiki-light:#C678DD">}</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">`</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">    }</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  }</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;/</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">script</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span></code></pre></figure>
<p>意味着需要修改 <code>Dom</code> 属性 <code>1000</code> 次，这显然极其浪费性能而且是无意义的，因为对于浏览器来说在执行异步的渲染任务前即便修改了 <code>1000</code> 次 <code>Dom</code>，也只会渲染 <code>Dom 更新, 1000</code> 这最后一次修改。所以 <code>Vue</code> 内部也采用了一样的办法，异步的更新 <code>Dom</code> 属性。</p>
<h2 id="vue-内部的异步更新"><a href="#vue-内部的异步更新">Vue 内部的异步更新</a></h2>
<p>当模板上这样展示 <code>{{ a }}</code> ，即在编译好的渲染函数中访问响应式变量 <code>a</code>， 会为 <code>a</code> 添加一个 dep，当 <code>a</code> 变更后重新执行此 <code>dep</code>。在 <a href="https://github.com/vuejs/core/blob/59e828448e7f37643cd0eaea924a764e9d314448/packages/runtime-core/src/renderer.ts#L1545" rel="noreferrer noopener" target="_blank">源码</a> 中</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#dbd7caee;--shiki-light:#abb2bf;--shiki-dark-bg:#121212;--shiki-light-bg:#282c34" tabindex="0" data-language="ts" data-theme="vitesse-dark one-dark-pro"><code data-language="ts" data-theme="vitesse-dark one-dark-pro" style="display:grid"><span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">const</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> update</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">: </span><span style="--shiki-dark:#5DA994;--shiki-light:#E5C07B">SchedulerJob</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> ()</span><span style="--shiki-dark:#666666;--shiki-light:#C678DD"> =&gt;</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> effect</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">run</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">()</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">update</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">id</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> instance</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">uid</span></span>
<span data-line=""><span style="--shiki-dark:#758575DD;--shiki-light:#7F848E;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic">// create reactive effect for rendering</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">const</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> effect</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> (</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">instance</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">effect</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD"> new</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> ReactiveEffect</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">  componentUpdateFn</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">,</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  ()</span><span style="--shiki-dark:#666666;--shiki-light:#C678DD"> =&gt;</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> queueJob</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">update</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">),</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">  instance</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">scope</span><span style="--shiki-dark:#758575DD;--shiki-light:#7F848E;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic"> // track it in component&#x27;s effect scope</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">))</span></span></code></pre></figure>
<p>先通过 <code>new ReactiveEffect</code> 生成一个 <code>effect</code> ，传入的第一个参数会在 <code>ReactiveEffect</code> 内部保存为一个 <code>fn</code>，然后 <code>ReactiveEffect</code> 返回一个 <code>run</code> 函数，执行 <code>effect.run()</code>，就会执行内部的 <code>this.fn()</code> 即 <code>componentUpdateFn</code>，把这个 <code>effect</code> 当做 <code>dep</code> 添加到响应式变量 <code>a</code> 的 <code>deps</code> 中，<code>a</code> 变更后再执行 <code>dep.run()</code> 。但这仍然是同步更改，<code>a.value</code> 被赋值 <code>1000</code> 次，就会执行 <code>1000</code> 次 <code>componentUpdateFn</code> 。所以 <code>ReactiveEffect</code> 可以传入第二个变量，允许你自定义怎么调用 <code>effect.run()</code>，在内部保存为 <code>scheduler</code>。源码中将 <code>effect.run()</code> 传入到 <code>queueJob</code> 函数，而 <code>queueJob</code> 函数就可以异步的延迟调用 <code>effect.run()</code>。<a href="https://github.com/vuejs/core/blob/59e828448e7f37643cd0eaea924a764e9d314448/packages/runtime-core/src/scheduler.ts#LL79-L107C2" rel="noreferrer noopener" target="_blank">源码</a>：</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#dbd7caee;--shiki-light:#abb2bf;--shiki-dark-bg:#121212;--shiki-light-bg:#282c34" tabindex="0" data-language="ts" data-theme="vitesse-dark one-dark-pro"><code data-language="ts" data-theme="vitesse-dark one-dark-pro" style="display:grid"><span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#C678DD">export</span><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD"> function</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> queueJob</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic">job</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">: </span><span style="--shiki-dark:#5DA994;--shiki-light:#E5C07B">SchedulerJob</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#C678DD">  if</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> (</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2">    !</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">queue</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#B8A965;--shiki-light:#E06C75">length</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2"> ||</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2">    !</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">queue</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">includes</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">      job</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">,</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">      isFlushing</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2"> &amp;&amp;</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> job</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">allowRecurse</span><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD"> ?</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> flushIndex</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2"> +</span><span style="--shiki-dark:#4C9A91;--shiki-light:#D19A66"> 1</span><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD"> :</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> flushIndex</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">    )</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  )</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#C678DD">    if</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> (</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">job</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">id</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2"> ==</span><span style="--shiki-dark:#CB7676;--shiki-light:#D19A66"> null</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">      queue</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">push</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">job</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">    }</span><span style="--shiki-dark:#4D9375;--shiki-light:#C678DD"> else</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">      queue</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">splice</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">findInsertionIndex</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">job</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">id</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">),</span><span style="--shiki-dark:#4C9A91;--shiki-light:#D19A66"> 0</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">,</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> job</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">    }</span></span>
<span data-line=""><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">    queueFlush</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">()</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  }</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">function</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> queueFlush</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">()</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#C678DD">  if</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> (</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2">!</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">isFlushing</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2"> &amp;&amp;</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2"> !</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">isFlushPending</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">    isFlushPending</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#4D9375;--shiki-light:#D19A66"> true</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">    currentFlushPromise</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> resolvedPromise</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">then</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">flushJobs</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  }</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">}</span></span></code></pre></figure>
<p>首先 <code>effect.run()</code> 会被当做一个 <code>job</code> 传入到 <code>queueJob</code> 函数，如果 <code>a.value</code> 变更后，传入的 <code>job</code> 不在 <code>queue</code> 中，那么此 <code>job</code> 就会被添加到 <code>queue</code> 并且调用 <code>queueFlush</code> 函数，这样即便触发了 <code>1000</code> 次更新，只要 <code>queue</code> 包含这个更新，只执行一次就可以了，并且同一任务内 <code>b.value</code> 变更也不会再存入一个 <code>job</code>，因为渲染函数存入 <code>a</code> <code>b</code> 的 <code>dep</code> 是相同的。其实从这里就可以解决多次触发的问题，但是同步更新 <code>Dom</code> 可能会引起回流或者重绘，因此 <code>Vue</code> 通过 <a href="https://github.com/vuejs/core/blob/59e828448e7f37643cd0eaea924a764e9d314448/packages/runtime-core/src/scheduler.ts#L47" rel="noreferrer noopener" target="_blank">resolvedPromise</a> 创建了一个微任务，将所有的更新推迟到微任务中，一次性更新 <code>Dom</code> 。</p>
<h2 id="nexttick"><a href="#nexttick">nextTick</a></h2>
<p>讲到这里，<code>nextTick</code> 的作用就出来了，当 <code>Vue</code> 在微任务中修改 <code>Dom</code> 属性后，在当前任务中是拿不到被修改后的 <code>Dom</code> 属性的。</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#dbd7caee;--shiki-light:#abb2bf;--shiki-dark-bg:#121212;--shiki-light-bg:#282c34" tabindex="0" data-language="html" data-theme="vitesse-dark one-dark-pro"><code data-language="html" data-theme="vitesse-dark one-dark-pro" style="display:grid"><span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">template</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  &lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">div</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#ABB2BF">{{a}}</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;/</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">div</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  &lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">button</span><span style="--shiki-dark:#BD976A;--shiki-light:#D19A66"> @click</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">=</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">fn</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span><span style="--shiki-dark:#DBD7CAEE;--shiki-light:#ABB2BF">click</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;/</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">button</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;/</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">template</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">script</span><span style="--shiki-dark:#BD976A;--shiki-light:#D19A66"> setup</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">  const</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> a</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> ref</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">  function</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> fn</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">()</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#C678DD">    for</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> (</span><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">let</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> i</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#4C9A91;--shiki-light:#D19A66"> 1</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">;</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> i</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> &lt;=</span><span style="--shiki-dark:#4C9A91;--shiki-light:#D19A66"> 1000</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">;</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> i</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2">++</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">      a</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">value</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379"> `</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">Dom 更新, </span><span style="--shiki-dark:#666666;--shiki-light:#C678DD">${</span><span style="--shiki-dark:#C98A7D;--shiki-light:#E06C75">i</span><span style="--shiki-dark:#666666;--shiki-light:#C678DD">}</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">`</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">    }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">    console</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">log</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">document</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">querySelector</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">div</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">).</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">innerHTML</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span><span style="--shiki-dark:#758575DD;--shiki-light:#7F848E;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic"> // 输出空字符串</span></span>
<span data-line=""><span style="--shiki-dark:#B8A965;--shiki-light:#E5C07B">    Promise</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">resolve</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">().</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">then</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(()</span><span style="--shiki-dark:#666666;--shiki-light:#C678DD"> =&gt;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">      console</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">log</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B">document</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">querySelector</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#C98A7D;--shiki-light:#98C379">div</span><span style="--shiki-dark:#C98A7D99;--shiki-light:#98C379">&quot;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">).</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">innerHTML</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span><span style="--shiki-dark:#758575DD;--shiki-light:#7F848E;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic"> // 输出 Dom 更新, 1</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">    })</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  }</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;/</span><span style="--shiki-dark:#4D9375;--shiki-light:#E06C75">script</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span></code></pre></figure>
<p><code>nextTick</code> 也是对 <code>Promise.resolve</code> 的封装</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#dbd7caee;--shiki-light:#abb2bf;--shiki-dark-bg:#121212;--shiki-light-bg:#282c34" tabindex="0" data-language="ts" data-theme="vitesse-dark one-dark-pro"><code data-language="ts" data-theme="vitesse-dark one-dark-pro" style="display:grid"><span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">const</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> resolvedPromise</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#758575DD;--shiki-light:#7F848E;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic"> /*#__PURE__*/</span><span style="--shiki-dark:#B8A965;--shiki-light:#E5C07B"> Promise</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">resolve</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">()</span><span style="--shiki-dark:#4D9375;--shiki-light:#C678DD"> as</span><span style="--shiki-dark:#5DA994;--shiki-light:#E5C07B"> Promise</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;</span><span style="--shiki-dark:#5DA994;--shiki-light:#E5C07B">any</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#C678DD">export</span><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD"> function</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> nextTick</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;</span><span style="--shiki-dark:#5DA994;--shiki-light:#E5C07B">T</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#5DA994;--shiki-light:#E5C07B"> void</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;(</span></span>
<span data-line=""><span style="--shiki-dark:#C99076;--shiki-light:#E5C07B;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic">  this</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">: </span><span style="--shiki-dark:#5DA994;--shiki-light:#E5C07B">T</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">,</span></span>
<span data-line=""><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">  fn</span><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">?</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">: (</span><span style="--shiki-dark:#C99076;--shiki-light:#E5C07B;--shiki-dark-font-style:inherit;--shiki-light-font-style:italic">this</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">: </span><span style="--shiki-dark:#5DA994;--shiki-light:#E5C07B">T</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">) </span><span style="--shiki-dark:#666666;--shiki-light:#C678DD">=&gt;</span><span style="--shiki-dark:#5DA994;--shiki-light:#E5C07B"> void</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">):</span><span style="--shiki-dark:#5DA994;--shiki-light:#E5C07B"> Promise</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&lt;</span><span style="--shiki-dark:#5DA994;--shiki-light:#E5C07B">void</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">&gt;</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">  const</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> p</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> currentFlushPromise</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2"> ||</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> resolvedPromise</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#C678DD">  return</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> fn</span><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD"> ?</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> p</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">then</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#C99076;--shiki-light:#E5C07B">this</span><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD"> ?</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> fn</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">bind</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#C99076;--shiki-light:#E5C07B">this</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD"> :</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> fn</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD"> :</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75"> p</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">}</span></span></code></pre></figure>
<p><code>currentFlushPromise</code> 不为空的情况下，优先使用 <code>currentFlushPromise</code>。</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#dbd7caee;--shiki-light:#abb2bf;--shiki-dark-bg:#121212;--shiki-light-bg:#282c34" tabindex="0" data-language="ts" data-theme="vitesse-dark one-dark-pro"><code data-language="ts" data-theme="vitesse-dark one-dark-pro" style="display:grid"><span data-line=""><span style="--shiki-dark:#CB7676;--shiki-light:#C678DD">function</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF"> queueFlush</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">()</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#4D9375;--shiki-light:#C678DD">  if</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> (</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2">!</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">isFlushing</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2"> &amp;&amp;</span><span style="--shiki-dark:#CB7676;--shiki-light:#56B6C2"> !</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">isFlushPending</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF"> {</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">    isFlushPending</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#4D9375;--shiki-light:#D19A66"> true</span></span>
<span data-line=""><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">    currentFlushPromise</span><span style="--shiki-dark:#666666;--shiki-light:#56B6C2"> =</span><span style="--shiki-dark:#BD976A;--shiki-light:#E5C07B"> resolvedPromise</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">.</span><span style="--shiki-dark:#80A665;--shiki-light:#61AFEF">then</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">(</span><span style="--shiki-dark:#BD976A;--shiki-light:#E06C75">flushJobs</span><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">)</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">  }</span></span>
<span data-line=""><span style="--shiki-dark:#666666;--shiki-light:#ABB2BF">}</span></span></code></pre></figure>
<p><code>currentFlushPromise</code> 被赋值为一个 <code>promise</code>，当 <code>flushJobs</code> 函数执行完后，也就是 <code>Dom</code> 属性更新完后就会执行 <code>nextTick</code> 的回调，而在这个回调函数中就可以得到被修改后的 <code>Dom</code> 属性值。</p></div></div></div></div><div class="w-full flex justify-center text-22px h-28px pt-12px border-t-2px border-t-solid flex-shrink-0 lt-md:mt-1 lt-md:mb-12px"><a href="https://github.com/a145789" target="_blank" rel="noreferrer noopener" class="mx-6px"><div class="i-uil-github-alt hover:i-mingcute-github-fill transition-all duration-200"></div></a><div class="i-ph-moon-stars-fill dark:i-ic-baseline-light-mode mx-6px cursor-pointer transition-all duration-200"></div></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"data":{"createdAt":"2023/04/03 15:20","label":"面试一二三","slug":"nextTick 原理及使用"},"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    a: \"a\",\n    p: \"p\",\n    code: \"code\",\n    strong: \"strong\",\n    h2: \"h2\",\n    figure: \"figure\",\n    pre: \"pre\",\n    span: \"span\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      id: \"nexttick-作用\",\n      children: _jsx(_components.a, {\n        href: \"#nexttick-作用\",\n        children: \"nextTick 作用\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"vue\"\n      }), \" 官网对 \", _jsx(_components.a, {\n        href: \"https://cn.vuejs.org/api/general.html#nexttick\",\n        rel: \"noreferrer noopener\",\n        target: \"_blank\",\n        children: \"nextTick\"\n      }), \" 的介绍为 \", _jsxs(_components.strong, {\n        children: [\"等待下一次 \", _jsx(_components.code, {\n          children: \"DOM\"\n        }), \" 更新刷新的工具方法\"]\n      }), \"。首先什么是 \", _jsx(_components.code, {\n        children: \"DOM\"\n      }), \" 更新。\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"dom-更新\",\n      children: _jsx(_components.a, {\n        href: \"#dom-更新\",\n        children: \"Dom 更新\"\n      })\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#abb2bf\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#282c34\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"js\",\n        \"data-theme\": \"vitesse-dark one-dark-pro\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"js\",\n          \"data-theme\": \"vitesse-dark one-dark-pro\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"document\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"querySelector\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"div\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \").\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"innerHTML\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \" \\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"Dom 更新\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"console\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"log\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"document\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"querySelector\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"div\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \").\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"innerHTML\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#7F848E\",\n                \"--shiki-dark-font-style\": \"inherit\",\n                \"--shiki-light-font-style\": \"italic\"\n              },\n              children: \" // 会输出 Dom 更新\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"Dom\"\n      }), \" 更新需要先对 \", _jsx(_components.code, {\n        children: \"Dom\"\n      }), \" 对象上的属性做修改，例如修改某个节点 \", _jsx(_components.code, {\n        children: \"innerHTML\"\n      }), \"，这一步是同步的，然后浏览器会异步更新 \", _jsx(_components.code, {\n        children: \"DOM\"\n      }), \"。但对于 \", _jsx(_components.code, {\n        children: \"Vue\"\n      }), \" 而言，响应式更新帮我们隐去了这一步。\"]\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#abb2bf\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#282c34\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"html\",\n        \"data-theme\": \"vitesse-dark one-dark-pro\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"html\",\n          \"data-theme\": \"vitesse-dark one-dark-pro\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"template\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  \u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"div\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" class\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"aka\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#DBD7CAEE\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"{{a}}\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"div\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  \u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"button\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" @click\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#DBD7CAEE\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"click\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"button\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"template\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"script\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" setup\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"  const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" a\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" ref\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"  function\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"    a\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \" \\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"Dom 更新\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"script\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"每次点击 \", _jsx(_components.code, {\n        children: \"button\"\n      }), \" 更改 \", _jsx(_components.code, {\n        children: \"a.value\"\n      }), \" 就会触发 \", _jsx(_components.code, {\n        children: \"Dom\"\n      }), \" 更新。但如上文更改 \", _jsx(_components.code, {\n        children: \"Dom\"\n      }), \" 属性是同步的，倘若代码是这样的\"]\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#abb2bf\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#282c34\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"html\",\n        \"data-theme\": \"vitesse-dark one-dark-pro\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"html\",\n          \"data-theme\": \"vitesse-dark one-dark-pro\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"template\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  \u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"div\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#DBD7CAEE\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"{{a}}|{{b}}\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"div\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  \u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"button\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" @click\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#DBD7CAEE\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"click\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"button\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"template\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"script\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" setup\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"  const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" a\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" ref\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"  const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" b\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" ref\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"  function\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"    for\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"let\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" i\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4C9A91\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" 1\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \";\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" i\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" \u003c=\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4C9A91\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" 1000\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \";\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" i\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \"++\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"      a\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \" `\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"Dom 更新, \"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"${\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"i\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"}\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"`\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"      b\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \" `\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"Dom 更新, \"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"${\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"i\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"}\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"`\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"    }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"script\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"意味着需要修改 \", _jsx(_components.code, {\n        children: \"Dom\"\n      }), \" 属性 \", _jsx(_components.code, {\n        children: \"1000\"\n      }), \" 次，这显然极其浪费性能而且是无意义的，因为对于浏览器来说在执行异步的渲染任务前即便修改了 \", _jsx(_components.code, {\n        children: \"1000\"\n      }), \" 次 \", _jsx(_components.code, {\n        children: \"Dom\"\n      }), \"，也只会渲染 \", _jsx(_components.code, {\n        children: \"Dom 更新, 1000\"\n      }), \" 这最后一次修改。所以 \", _jsx(_components.code, {\n        children: \"Vue\"\n      }), \" 内部也采用了一样的办法，异步的更新 \", _jsx(_components.code, {\n        children: \"Dom\"\n      }), \" 属性。\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"vue-内部的异步更新\",\n      children: _jsx(_components.a, {\n        href: \"#vue-内部的异步更新\",\n        children: \"Vue 内部的异步更新\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"当模板上这样展示 \", _jsx(_components.code, {\n        children: \"{{ a }}\"\n      }), \" ，即在编译好的渲染函数中访问响应式变量 \", _jsx(_components.code, {\n        children: \"a\"\n      }), \"， 会为 \", _jsx(_components.code, {\n        children: \"a\"\n      }), \" 添加一个 dep，当 \", _jsx(_components.code, {\n        children: \"a\"\n      }), \" 变更后重新执行此 \", _jsx(_components.code, {\n        children: \"dep\"\n      }), \"。在 \", _jsx(_components.a, {\n        href: \"https://github.com/vuejs/core/blob/59e828448e7f37643cd0eaea924a764e9d314448/packages/runtime-core/src/renderer.ts#L1545\",\n        rel: \"noreferrer noopener\",\n        target: \"_blank\",\n        children: \"源码\"\n      }), \" 中\"]\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#abb2bf\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#282c34\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"vitesse-dark one-dark-pro\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"vitesse-dark one-dark-pro\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" update\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"SchedulerJob\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" ()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" =\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" effect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"run\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"()\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"update\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"id\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" instance\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"uid\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#7F848E\",\n                \"--shiki-dark-font-style\": \"inherit\",\n                \"--shiki-light-font-style\": \"italic\"\n              },\n              children: \"// create reactive effect for rendering\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" effect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"instance\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"effect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" new\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" ReactiveEffect\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"  componentUpdateFn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \",\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  ()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" =\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" queueJob\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"update\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"),\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"  instance\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"scope\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#7F848E\",\n                \"--shiki-dark-font-style\": \"inherit\",\n                \"--shiki-light-font-style\": \"italic\"\n              },\n              children: \" // track it in component's effect scope\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"))\"\n            })\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"先通过 \", _jsx(_components.code, {\n        children: \"new ReactiveEffect\"\n      }), \" 生成一个 \", _jsx(_components.code, {\n        children: \"effect\"\n      }), \" ，传入的第一个参数会在 \", _jsx(_components.code, {\n        children: \"ReactiveEffect\"\n      }), \" 内部保存为一个 \", _jsx(_components.code, {\n        children: \"fn\"\n      }), \"，然后 \", _jsx(_components.code, {\n        children: \"ReactiveEffect\"\n      }), \" 返回一个 \", _jsx(_components.code, {\n        children: \"run\"\n      }), \" 函数，执行 \", _jsx(_components.code, {\n        children: \"effect.run()\"\n      }), \"，就会执行内部的 \", _jsx(_components.code, {\n        children: \"this.fn()\"\n      }), \" 即 \", _jsx(_components.code, {\n        children: \"componentUpdateFn\"\n      }), \"，把这个 \", _jsx(_components.code, {\n        children: \"effect\"\n      }), \" 当做 \", _jsx(_components.code, {\n        children: \"dep\"\n      }), \" 添加到响应式变量 \", _jsx(_components.code, {\n        children: \"a\"\n      }), \" 的 \", _jsx(_components.code, {\n        children: \"deps\"\n      }), \" 中，\", _jsx(_components.code, {\n        children: \"a\"\n      }), \" 变更后再执行 \", _jsx(_components.code, {\n        children: \"dep.run()\"\n      }), \" 。但这仍然是同步更改，\", _jsx(_components.code, {\n        children: \"a.value\"\n      }), \" 被赋值 \", _jsx(_components.code, {\n        children: \"1000\"\n      }), \" 次，就会执行 \", _jsx(_components.code, {\n        children: \"1000\"\n      }), \" 次 \", _jsx(_components.code, {\n        children: \"componentUpdateFn\"\n      }), \" 。所以 \", _jsx(_components.code, {\n        children: \"ReactiveEffect\"\n      }), \" 可以传入第二个变量，允许你自定义怎么调用 \", _jsx(_components.code, {\n        children: \"effect.run()\"\n      }), \"，在内部保存为 \", _jsx(_components.code, {\n        children: \"scheduler\"\n      }), \"。源码中将 \", _jsx(_components.code, {\n        children: \"effect.run()\"\n      }), \" 传入到 \", _jsx(_components.code, {\n        children: \"queueJob\"\n      }), \" 函数，而 \", _jsx(_components.code, {\n        children: \"queueJob\"\n      }), \" 函数就可以异步的延迟调用 \", _jsx(_components.code, {\n        children: \"effect.run()\"\n      }), \"。\", _jsx(_components.a, {\n        href: \"https://github.com/vuejs/core/blob/59e828448e7f37643cd0eaea924a764e9d314448/packages/runtime-core/src/scheduler.ts#LL79-L107C2\",\n        rel: \"noreferrer noopener\",\n        target: \"_blank\",\n        children: \"源码\"\n      }), \"：\"]\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#abb2bf\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#282c34\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"vitesse-dark one-dark-pro\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"vitesse-dark one-dark-pro\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"export\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" function\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" queueJob\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\",\n                \"--shiki-dark-font-style\": \"inherit\",\n                \"--shiki-light-font-style\": \"italic\"\n              },\n              children: \"job\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"SchedulerJob\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"  if\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" (\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \"    !\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"queue\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#B8A965\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"length\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" ||\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \"    !\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"queue\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"includes\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"      job\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \",\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"      isFlushing\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" \u0026\u0026\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" job\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"allowRecurse\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" ?\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" flushIndex\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" +\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4C9A91\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" 1\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" :\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" flushIndex\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"    )\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  )\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"    if\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"job\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"id\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" ==\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" null\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"      queue\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"push\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"job\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"    }\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" else\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"      queue\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"splice\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"findInsertionIndex\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"job\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"id\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"),\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4C9A91\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" 0\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \",\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" job\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"    }\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"    queueFlush\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"()\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"}\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"function\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" queueFlush\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"  if\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"isFlushing\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" \u0026\u0026\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" !\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"isFlushPending\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"    isFlushPending\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" true\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"    currentFlushPromise\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" resolvedPromise\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"then\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"flushJobs\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"首先 \", _jsx(_components.code, {\n        children: \"effect.run()\"\n      }), \" 会被当做一个 \", _jsx(_components.code, {\n        children: \"job\"\n      }), \" 传入到 \", _jsx(_components.code, {\n        children: \"queueJob\"\n      }), \" 函数，如果 \", _jsx(_components.code, {\n        children: \"a.value\"\n      }), \" 变更后，传入的 \", _jsx(_components.code, {\n        children: \"job\"\n      }), \" 不在 \", _jsx(_components.code, {\n        children: \"queue\"\n      }), \" 中，那么此 \", _jsx(_components.code, {\n        children: \"job\"\n      }), \" 就会被添加到 \", _jsx(_components.code, {\n        children: \"queue\"\n      }), \" 并且调用 \", _jsx(_components.code, {\n        children: \"queueFlush\"\n      }), \" 函数，这样即便触发了 \", _jsx(_components.code, {\n        children: \"1000\"\n      }), \" 次更新，只要 \", _jsx(_components.code, {\n        children: \"queue\"\n      }), \" 包含这个更新，只执行一次就可以了，并且同一任务内 \", _jsx(_components.code, {\n        children: \"b.value\"\n      }), \" 变更也不会再存入一个 \", _jsx(_components.code, {\n        children: \"job\"\n      }), \"，因为渲染函数存入 \", _jsx(_components.code, {\n        children: \"a\"\n      }), \" \", _jsx(_components.code, {\n        children: \"b\"\n      }), \" 的 \", _jsx(_components.code, {\n        children: \"dep\"\n      }), \" 是相同的。其实从这里就可以解决多次触发的问题，但是同步更新 \", _jsx(_components.code, {\n        children: \"Dom\"\n      }), \" 可能会引起回流或者重绘，因此 \", _jsx(_components.code, {\n        children: \"Vue\"\n      }), \" 通过 \", _jsx(_components.a, {\n        href: \"https://github.com/vuejs/core/blob/59e828448e7f37643cd0eaea924a764e9d314448/packages/runtime-core/src/scheduler.ts#L47\",\n        rel: \"noreferrer noopener\",\n        target: \"_blank\",\n        children: \"resolvedPromise\"\n      }), \" 创建了一个微任务，将所有的更新推迟到微任务中，一次性更新 \", _jsx(_components.code, {\n        children: \"Dom\"\n      }), \" 。\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"nexttick\",\n      children: _jsx(_components.a, {\n        href: \"#nexttick\",\n        children: \"nextTick\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"讲到这里，\", _jsx(_components.code, {\n        children: \"nextTick\"\n      }), \" 的作用就出来了，当 \", _jsx(_components.code, {\n        children: \"Vue\"\n      }), \" 在微任务中修改 \", _jsx(_components.code, {\n        children: \"Dom\"\n      }), \" 属性后，在当前任务中是拿不到被修改后的 \", _jsx(_components.code, {\n        children: \"Dom\"\n      }), \" 属性的。\"]\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#abb2bf\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#282c34\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"html\",\n        \"data-theme\": \"vitesse-dark one-dark-pro\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"html\",\n          \"data-theme\": \"vitesse-dark one-dark-pro\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"template\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  \u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"div\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#DBD7CAEE\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"{{a}}\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"div\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  \u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"button\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" @click\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"=\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#DBD7CAEE\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"click\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"button\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"template\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"script\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" setup\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"  const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" a\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" ref\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"  function\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"    for\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"let\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" i\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4C9A91\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" 1\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \";\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" i\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" \u003c=\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4C9A91\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" 1000\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \";\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" i\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \"++\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"      a\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"value\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \" `\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"Dom 更新, \"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"${\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"i\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"}\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"`\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"    }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"    console\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"log\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"document\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"querySelector\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"div\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \").\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"innerHTML\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#7F848E\",\n                \"--shiki-dark-font-style\": \"inherit\",\n                \"--shiki-light-font-style\": \"italic\"\n              },\n              children: \" // 输出空字符串\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#B8A965\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"    Promise\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"resolve\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"().\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"then\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" =\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"      console\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"log\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"document\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"querySelector\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"div\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C98A7D99\",\n                \"--shiki-light\": \"#98C379\"\n              },\n              children: \"\\\"\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \").\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"innerHTML\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#7F848E\",\n                \"--shiki-dark-font-style\": \"inherit\",\n                \"--shiki-light-font-style\": \"italic\"\n              },\n              children: \" // 输出 Dom 更新, 1\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"    })\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"script\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"nextTick\"\n      }), \" 也是对 \", _jsx(_components.code, {\n        children: \"Promise.resolve\"\n      }), \" 的封装\"]\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#abb2bf\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#282c34\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"vitesse-dark one-dark-pro\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"vitesse-dark one-dark-pro\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" resolvedPromise\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#758575DD\",\n                \"--shiki-light\": \"#7F848E\",\n                \"--shiki-dark-font-style\": \"inherit\",\n                \"--shiki-light-font-style\": \"italic\"\n              },\n              children: \" /*#__PURE__*/\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#B8A965\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" Promise\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"resolve\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" as\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" Promise\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"any\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"export\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" function\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" nextTick\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" void\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e(\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#E5C07B\",\n                \"--shiki-dark-font-style\": \"inherit\",\n                \"--shiki-light-font-style\": \"italic\"\n              },\n              children: \"  this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \",\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"  fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"?\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \": (\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#E5C07B\",\n                \"--shiki-dark-font-style\": \"inherit\",\n                \"--shiki-light-font-style\": \"italic\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \": \"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"T\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \") \"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"=\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" void\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"):\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" Promise\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003c\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#5DA994\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"void\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"\u003e\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"  const\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" p\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" currentFlushPromise\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" ||\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" resolvedPromise\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: \" \"\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"  return\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" ?\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" p\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"then\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" ?\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"bind\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#C99076\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \"this\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" :\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" fn\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \" :\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \" p\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"currentFlushPromise\"\n      }), \" 不为空的情况下，优先使用 \", _jsx(_components.code, {\n        children: \"currentFlushPromise\"\n      }), \"。\"]\n    }), \"\\n\", _jsx(_components.figure, {\n      \"data-rehype-pretty-code-figure\": \"\",\n      children: _jsx(_components.pre, {\n        style: {\n          \"--shiki-dark\": \"#dbd7caee\",\n          \"--shiki-light\": \"#abb2bf\",\n          \"--shiki-dark-bg\": \"#121212\",\n          \"--shiki-light-bg\": \"#282c34\"\n        },\n        tabIndex: \"0\",\n        \"data-language\": \"ts\",\n        \"data-theme\": \"vitesse-dark one-dark-pro\",\n        children: _jsxs(_components.code, {\n          \"data-language\": \"ts\",\n          \"data-theme\": \"vitesse-dark one-dark-pro\",\n          style: {\n            display: \"grid\"\n          },\n          children: [_jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"function\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \" queueFlush\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"()\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#C678DD\"\n              },\n              children: \"  if\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" (\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \"!\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"isFlushing\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" \u0026\u0026\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#CB7676\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" !\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"isFlushPending\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \" {\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"    isFlushPending\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#4D9375\",\n                \"--shiki-light\": \"#D19A66\"\n              },\n              children: \" true\"\n            })]\n          }), \"\\n\", _jsxs(_components.span, {\n            \"data-line\": \"\",\n            children: [_jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"    currentFlushPromise\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#56B6C2\"\n              },\n              children: \" =\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E5C07B\"\n              },\n              children: \" resolvedPromise\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \".\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#80A665\",\n                \"--shiki-light\": \"#61AFEF\"\n              },\n              children: \"then\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"(\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#BD976A\",\n                \"--shiki-light\": \"#E06C75\"\n              },\n              children: \"flushJobs\"\n            }), _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \")\"\n            })]\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"  }\"\n            })\n          }), \"\\n\", _jsx(_components.span, {\n            \"data-line\": \"\",\n            children: _jsx(_components.span, {\n              style: {\n                \"--shiki-dark\": \"#666666\",\n                \"--shiki-light\": \"#ABB2BF\"\n              },\n              children: \"}\"\n            })\n          })]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"currentFlushPromise\"\n      }), \" 被赋值为一个 \", _jsx(_components.code, {\n        children: \"promise\"\n      }), \"，当 \", _jsx(_components.code, {\n        children: \"flushJobs\"\n      }), \" 函数执行完后，也就是 \", _jsx(_components.code, {\n        children: \"Dom\"\n      }), \" 属性更新完后就会执行 \", _jsx(_components.code, {\n        children: \"nextTick\"\n      }), \" 的回调，而在这个回调函数中就可以得到被修改后的 \", _jsx(_components.code, {\n        children: \"Dom\"\n      }), \" 属性值。\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{"createdAt":"2023/04/03 15:20"}}},"__N_SSG":true},"page":"/blog/[label]/[slug]","query":{"label":"面试一二三","slug":"nextTick 原理及使用"},"buildId":"dL7yXIowPwegpQkWBMGTD","assetPrefix":"/aboutme","isFallback":false,"dynamicIds":[155],"gsp":true,"scriptLoader":[]}</script></body></html>